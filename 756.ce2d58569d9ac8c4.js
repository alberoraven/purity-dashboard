(self.webpackChunkpurity_smart_services=self.webpackChunkpurity_smart_services||[]).push([[756],{5756:(ar,cr,ne)=>{"use strict";ne.d(cr,{q:()=>La});var je={};ne.r(je),ne.d(je,{after:()=>Bi,assign:()=>_t,cancel:()=>pr,choose:()=>un,doneState:()=>qi,error:()=>mr,errorExecution:()=>zi,errorPlatform:()=>vr,init:()=>cn,invoke:()=>Pt,log:()=>Rt,nullEvent:()=>an,pure:()=>ln,raise:()=>Pe,send:()=>Ie,start:()=>Ot,stop:()=>kt,update:()=>It});var it={};ne.r(it),ne.d(it,{actionTypes:()=>je,after:()=>En,assign:()=>Sn,cancel:()=>mn,choose:()=>Wi,done:()=>lt,doneInvoke:()=>Ge,error:()=>Ve,escalate:()=>Ji,forwardTo:()=>Tn,getActionFunction:()=>Nt,initEvent:()=>Ne,isActionObject:()=>Hi,log:()=>Vi,pure:()=>Ki,raise:()=>yr,resolveActions:()=>dt,resolveLog:()=>vn,resolveRaise:()=>dn,resolveSend:()=>fn,resolveStop:()=>wn,respond:()=>$i,send:()=>be,sendParent:()=>Ct,sendTo:()=>hn,sendUpdate:()=>pn,start:()=>yn,stop:()=>gn,toActionObject:()=>$e,toActionObjects:()=>me,toActivityDefinition:()=>Ut});var R=ne(5861);function ke(t){this.message=t}(ke.prototype=new Error).name="InvalidCharacterError";var Me=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new ke("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,o=0,a="";n=e.charAt(o++);~n&&(r=s%4?64*r+n:n,s++%4)?a+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return a};function ve(t){this.message=t}(ve.prototype=new Error).name="InvalidTokenError";var b=function(){return b=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},b.apply(this,arguments)};function ue(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]])}return r}function N(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var s,a,n=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(s=n.next()).done;)o.push(s.value)}catch(c){a={error:c}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function G(t,e,r){if(r||2===arguments.length)for(var o,n=0,s=e.length;n<s;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var gt,Hr={},ur="xstate.guard";function lr(t,e,r){void 0===r&&(r=".");var n=st(t,r),s=st(e,r);return C(s)?!!C(n)&&s===n:C(n)?n in s:Object.keys(n).every(function(o){return o in s&&lr(n[o],s[o])})}function Kr(t){try{return C(t)||"number"==typeof t?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function dr(t,e){try{return qe(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function st(t,e){return function Oi(t){return"object"==typeof t&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}(t)?t.value:qe(t)?wt(t):"string"!=typeof t?t:wt(dr(t,e))}function wt(t){if(1===t.length)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function ot(t,e){for(var r={},n=Object.keys(t),s=0;s<n.length;s++){var o=n[s];r[o]=e(t[o],o,t,s)}return r}function Jr(t,e,r){var n,s,o={};try{for(var a=N(Object.keys(t)),c=a.next();!c.done;c=a.next()){var u=c.value,l=t[u];!r(l)||(o[u]=e(l,u,t))}}catch(d){n={error:d}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return o}var ki=function(t){return function(e){var r,n,s=e;try{for(var o=N(t),a=o.next();!a.done;a=o.next())s=s[a.value]}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}};function St(t){return t?C(t)?[[t]]:H(Object.keys(t).map(function(r){var n=t[r];return"string"==typeof n||n&&Object.keys(n).length?St(t[r]).map(function(s){return[r].concat(s)}):[[r]]})):[[]]}function H(t){var e;return(e=[]).concat.apply(e,G([],U(t),!1))}function Wr(t){return qe(t)?t:[t]}function ie(t){return void 0===t?[]:Wr(t)}function Et(t,e,r){var n,s;if(F(t))return t(e,r.data);var o={};try{for(var a=N(Object.keys(t)),c=a.next();!c.done;c=a.next()){var u=c.value,l=t[u];o[u]=F(l)?l(e,r.data):l}}catch(d){n={error:d}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return o}function Zr(t){return!!(t instanceof Promise||null!==t&&(F(t)||"object"==typeof t)&&F(t.then))}function Yr(t,e){return ot(t.states,function(r,n){if(r){var s=(C(e)?void 0:e[n])||(r?r.current:void 0);if(s)return{current:s,states:Yr(r,s)}}})}function Ni(t,e){return{current:e,states:Yr(t,e)}}function Qr(t,e,r,n){return t&&r.reduce(function(o,a){var c,u,l=a.assignment,d={state:n,action:a,_event:e},g={};if(F(l))g=l(o,e.data,d);else try{for(var y=N(Object.keys(l)),v=y.next();!v.done;v=y.next()){var p=v.value,m=l[p];g[p]=F(m)?m(o,e.data,d):m}}catch(E){c={error:E}}finally{try{v&&!v.done&&(u=y.return)&&u.call(y)}finally{if(c)throw c.error}}return Object.assign({},o,g)},t)}function qe(t){return Array.isArray(t)}function F(t){return"function"==typeof t}function C(t){return"string"==typeof t}function Xr(t,e){if(t)return C(t)?{type:ur,name:t,predicate:e?e[t]:void 0}:F(t)?{type:ur,name:t.name,predicate:t}:t}var Te=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Re(t){return!!t&&"__xstatenode"in t}function fr(t,e){return C(t)||"number"==typeof t?b({type:t},e):t}function X(t,e){if(!C(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var r=fr(t);return b({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function ze(t,e){return Wr(e).map(function(n){return typeof n>"u"||"string"==typeof n||Re(n)?{target:n,event:t}:b(b({},n),{event:t})})}function en(t,e,r,n,s){var o=t.options.guards,a={state:s,cond:e,_event:n};if(e.type===ur)return(o?.[e.name]||e.predicate)(r,n.data,a);var c=o?.[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(r,n.data,a)}function tn(t){return"string"==typeof t?{type:t}:t}function Tt(t,e,r){var n=function(){},s="object"==typeof t,o=s?t:null;return{next:((s?t.next:t)||n).bind(o),error:((s?t.error:e)||n).bind(o),complete:((s?t.complete:r)||n).bind(o)}}function bt(t,e){return"".concat(t,":invocation[").concat(e,"]")}(gt={})[Te]=function(){return this},gt[Symbol.observable]=function(){return this};var j=(()=>{return(t=j||(j={})).Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose",j;var t})(),se=(()=>{return(t=se||(se={})).Parent="#_parent",t.Internal="#_internal",se;var t})(),xt=function(t){return"atomic"===t.type||"final"===t.type};function rn(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function at(t){return rn(t).filter(function(e){return"history"!==e.type})}function nn(t){var e=[t];return xt(t)?e:e.concat(H(at(t).map(nn)))}function ct(t,e){var r,n,s,o,a,c,u,l,g=hr(new Set(t)),y=new Set(e);try{for(var v=N(y),p=v.next();!p.done;p=v.next())for(var E=(m=p.value).parent;E&&!y.has(E);)y.add(E),E=E.parent}catch(B){r={error:B}}finally{try{p&&!p.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}var T=hr(y);try{for(var x=N(y),A=x.next();!A.done;A=x.next())if("compound"!==(m=A.value).type||T.get(m)&&T.get(m).length){if("parallel"===m.type)try{for(var _=(a=void 0,N(at(m))),z=_.next();!z.done;z=_.next()){var V=z.value;y.has(V)||(y.add(V),g.get(V)?g.get(V).forEach(function(Y){return y.add(Y)}):V.initialStateNodes.forEach(function(Y){return y.add(Y)}))}}catch(Y){a={error:Y}}finally{try{z&&!z.done&&(c=_.return)&&c.call(_)}finally{if(a)throw a.error}}}else g.get(m)?g.get(m).forEach(function(Y){return y.add(Y)}):m.initialStateNodes.forEach(function(Y){return y.add(Y)})}catch(B){s={error:B}}finally{try{A&&!A.done&&(o=x.return)&&o.call(x)}finally{if(s)throw s.error}}try{for(var L=N(y),M=L.next();!M.done;M=L.next()){var m;for(E=(m=M.value).parent;E&&!y.has(E);)y.add(E),E=E.parent}}catch(B){u={error:B}}finally{try{M&&!M.done&&(l=L.return)&&l.call(L)}finally{if(u)throw u.error}}return y}function sn(t,e){var r=e.get(t);if(!r)return{};if("compound"===t.type){var n=r[0];if(!n)return{};if(xt(n))return n.key}var s={};return r.forEach(function(o){s[o.key]=sn(o,e)}),s}function hr(t){var e,r,n=new Map;try{for(var s=N(t),o=s.next();!o.done;o=s.next()){var a=o.value;n.has(a)||n.set(a,[]),a.parent&&(n.has(a.parent)||n.set(a.parent,[]),n.get(a.parent).push(a))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n}function ji(t,e){return sn(t,hr(ct([t],e)))}function ut(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set&&t.has(e)}function At(t,e){return"compound"===e.type?at(e).some(function(r){return"final"===r.type&&ut(t,r)}):"parallel"===e.type&&at(e).every(function(r){return At(t,r)})}function on(t){return new Set(H(t.map(function(e){return e.tags})))}var Ot=j.Start,kt=j.Stop,Pe=j.Raise,Ie=j.Send,pr=j.Cancel,an=j.NullEvent,_t=j.Assign,Bi=j.After,qi=j.DoneState,Rt=j.Log,cn=j.Init,Pt=j.Invoke,zi=j.ErrorExecution,vr=j.ErrorPlatform,mr=j.ErrorCustom,It=j.Update,un=j.Choose,ln=j.Pure,Ne=X({type:cn});function Nt(t,e){return e&&e[t]||void 0}function $e(t,e){var r;if(C(t)||"number"==typeof t)r=F(n=Nt(t,e))?{type:t,exec:n}:n||{type:t,exec:void 0};else if(F(t))r={type:t.name||t.toString(),exec:t};else{var n;if(F(n=Nt(t.type,e)))r=b(b({},t),{exec:n});else if(n){var s=n.type||t.type;r=b(b(b({},n),t),{type:s})}else r=t}return r}var me=function(t,e){return t?(qe(t)?t:[t]).map(function(n){return $e(n,e)}):[]};function Ut(t){var e=$e(t);return b(b({id:C(t)?t:e.id},e),{type:e.type})}function yr(t){return C(t)?{type:Pe,event:t}:be(t,{to:se.Internal})}function dn(t){return{type:Pe,_event:X(t.event)}}function be(t,e){return{to:e?e.to:void 0,type:Ie,event:F(t)?t:fr(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:F(t)?t.name:Kr(t)}}function fn(t,e,r,n){var a,s={_event:r},o=X(F(t.event)?t.event(e,r.data,s):t.event);if(C(t.delay)){var c=n&&n[t.delay];a=F(c)?c(e,r.data,s):c}else a=F(t.delay)?t.delay(e,r.data,s):t.delay;var u=F(t.to)?t.to(e,r.data,s):t.to;return b(b({},t),{to:u,_event:o,event:o.data,delay:a})}function Ct(t,e){return be(t,b(b({},e),{to:se.Parent}))}function hn(t,e,r){return be(e,b(b({},r),{to:t}))}function pn(){return Ct(It)}function $i(t,e){return be(t,b(b({},e),{to:function(r,n,s){return s._event.origin}}))}var Gi=function(t,e){return{context:t,event:e}};function Vi(t,e){return void 0===t&&(t=Gi),{type:Rt,label:e,expr:t}}var vn=function(t,e,r){return b(b({},t),{value:C(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},mn=function(t){return{type:pr,sendId:t}};function yn(t){var e=Ut(t);return{type:j.Start,activity:e,exec:void 0}}function gn(t){var e=F(t)?t:Ut(t);return{type:j.Stop,activity:e,exec:void 0}}function wn(t,e,r){var n=F(t.activity)?t.activity(e,r.data):t.activity;return{type:j.Stop,activity:"string"==typeof n?{id:n}:n}}var Sn=function(t){return{type:_t,assignment:t}};function Hi(t){return"object"==typeof t&&"type"in t}function En(t,e){var r=e?"#".concat(e):"";return"".concat(j.After,"(").concat(t,")").concat(r)}function lt(t,e){var r="".concat(j.DoneState,".").concat(t);return{type:r,data:e,toString:function(){return r}}}function Ge(t,e){var r="".concat(j.DoneInvoke,".").concat(t);return{type:r,data:e,toString:function(){return r}}}function Ve(t,e){var r="".concat(j.ErrorPlatform,".").concat(t);return{type:r,data:e,toString:function(){return r}}}function Ki(t){return{type:j.Pure,get:t}}function Tn(t,e){return be(function(n,s){return s},b(b({},e),{to:t}))}function Ji(t,e){return Ct(function(r,n,s){return{type:mr,data:F(t)?t(r,n,s):t}},b(b({},e),{to:se.Parent}))}function Wi(t){return{type:j.Choose,conds:t}}function dt(t,e,r,n,s,o,a){void 0===a&&(a=!1);var c=a?[]:function(t){var e,r,n=[];try{for(var s=N(t),o=s.next();!o.done;o=s.next())for(var a=o.value,c=0;c<a.actions.length;)a.actions[c].type!==_t?c++:(n.push(a.actions[c]),a.actions.splice(c,1))}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n}(s),u=c.length?Qr(r,n,c,e):r,l=a?[r]:void 0,d=[];function g(p,m){var E;switch(m.type){case Pe:return dn(m);case Ie:var T=fn(m,u,n,t.options.delays);return o&&T.to!==se.Internal&&("entry"===p?d.push(T):o?.(T,u,n)),T;case Rt:var x=vn(m,u,n);return o?.(x,u,n),x;case un:if(!(_=null===(E=m.conds.find(function(pe){var Ee=Xr(pe.cond,t.options.guards);return!Ee||en(t,Ee,u,n,o?void 0:e)}))||void 0===E?void 0:E.actions))return[];var z=U(dt(t,e,u,n,[{type:p,actions:me(ie(_),t.options.actions)}],o,a),2),V=z[0];return l?.push(u=z[1]),V;case ln:var _;if(!(_=m.get(u,n.data)))return[];var M=U(dt(t,e,u,n,[{type:p,actions:me(ie(_),t.options.actions)}],o,a),2),B=M[0];return l?.push(u=M[1]),B;case kt:return x=wn(m,u,n),o?.(x,r,n),x;case _t:u=Qr(u,n,[m],o?void 0:e),l?.push(u);break;default:var k=$e(m,t.options.actions),$=k.exec;if(o)o(k,u,n);else if($&&l){var ae=l.length-1;k=b(b({},k),{exec:function(pe){for(var Ee=[],tt=1;tt<arguments.length;tt++)Ee[tt-1]=arguments[tt];$.apply(void 0,G([l[ae]],U(Ee),!1))}})}return k}}return[H(s.map(function y(p){var m,E,T=[];try{for(var x=N(p.actions),A=x.next();!A.done;A=x.next()){var z=g(p.type,A.value);z&&(T=T.concat(z))}}catch(V){m={error:V}}finally{try{A&&!A.done&&(E=x.return)&&E.call(x)}finally{if(m)throw m.error}}return d.forEach(function(V){o(V,u,n)}),d.length=0,T})),u]}function bn(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(C(t)||C(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(s){return bn(t[s],e[s])})}var le=function(){function t(e){var n,r=this;this.actions=[],this.activities=Hr,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Hr,this.meta=function Fi(t){return void 0===t&&(t=[]),t.reduce(function(e,r){return void 0!==r.meta&&(e[r.id]=r.meta),e},{})}(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==n?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return function Mi(t){return G([],U(new Set(H(G([],U(t.map(function(e){return e.ownEvents})),!1)))),!1)}(r.configuration)}})}return t.from=function(e,r){return e instanceof t?e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:r,_event:Ne,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){return e instanceof t?e.actions.length?new t({value:e.value,context:r,_event:Ne,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}}):e:t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(void 0===e&&(e=this.value),void 0===r&&(r="."),C(e))return[e];var s=Object.keys(e);return s.concat.apply(s,G([],U(s.map(function(o){return n.toStrings(e[o],r).map(function(a){return o+r+a})})),!1))},t.prototype.toJSON=function(){var r=this.tags,n=ue(this,["configuration","transitions","tags","machine"]);return b(b({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return lr(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r,n=null===(r=this.machine)||void 0===r?void 0:r.getTransitionData(this,e);return!!n?.transitions.length&&n.transitions.some(function(s){return void 0!==s.target||s.actions.length})},t}(),Dt=[],He=function(t,e){Dt.push(t);var r=e(t);return Dt.pop(),r};function xn(t){var e;return(e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}})[Te]=function(){return this},e}function An(t,e,r){var n=xn(e);if(n.deferred=!0,Re(t)){var s=n.state=He(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return s}}return n}function ns(t){return"string"==typeof t?{type:t,toString:function(){return t}}:t}function Lt(t){return b(b({type:Pt},t),{toJSON:function(){var e=ue(t,["onDone","onError"]);return b(b({},e),{type:Pt,src:ns(t.src)})}})}var Je={},We=function(t){return"#"===t[0]},os=function(){function t(e,r,n,s){void 0===n&&(n="context"in e?e.context:void 0);var a,o=this;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},r),this.parent=s?.parent,this.key=this.config.key||s?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:"."),this.id=this.config.id||G([this.machine.key],U(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(a=this.config.schema)&&void 0!==a?a:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?ot(this.config.states,function(l,d){var g,y=new t(l,{},void 0,{parent:o,key:d});return Object.assign(o.idMap,b(((g={})[y.id]=y,g),y.idMap)),y}):Je;var c=0;(function u(l){var d,g;l.order=c++;try{for(var y=N(rn(l)),v=y.next();!v.done;v=y.next())u(v.value)}catch(m){d={error:m}}finally{try{v&&!v.done&&(g=y.return)&&g.call(y)}finally{if(d)throw d.error}}})(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some(function(l){return""===l.event}):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=ie(this.config.entry||this.config.onEntry).map(function(l){return $e(l)}),this.onExit=ie(this.config.exit||this.config.onExit).map(function(l){return $e(l)}),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=ie(this.config.invoke).map(function(l,d){var g,y;if(Re(l)){var v=bt(o.id,d);return o.machine.options.services=b(((g={})[v]=l,g),o.machine.options.services),Lt({src:v,id:v})}if(C(l.src))return v=l.id||bt(o.id,d),Lt(b(b({},l),{id:v,src:l.src}));if(Re(l.src)||F(l.src))return v=l.id||bt(o.id,d),o.machine.options.services=b(((y={})[v]=l.src,y),o.machine.options.services),Lt(b(b({id:v},l),{src:v}));var p=l.src;return Lt(b(b({id:bt(o.id,d)},l),{src:p}))}),this.activities=ie(this.config.activities).concat(this.invoke).map(function(l){return Ut(l)}),this.transition=this.transition.bind(this),this.tags=ie(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||nn(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,o=n.activities,a=n.guards,c=n.services,u=n.delays;return new t(this.config,{actions:b(b({},n.actions),e.actions),activities:b(b({},o),e.activities),guards:b(b({},a),e.guards),services:b(b({},c),e.services),delays:b(b({},u),e.delays)},r??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return F(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:ot(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){return this.__cache.on?this.__cache.on:this.__cache.on=this.transitions.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=""===e,n=this.transitions.filter(function(s){var o=s.eventType===e;return r?o:o||"*"===s.eventType});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(o,a){var u=En(F(o)?"".concat(e.id,":delay[").concat(a,"]"):o,e.id);return e.onEntry.push(be(u,{delay:o})),e.onExit.push(mn(u)),u};return(qe(r)?r.map(function(o,a){var c=n(o.delay,a);return b(b({},o),{event:c})}):H(Object.keys(r).map(function(o,a){var c=r[o],u=C(c)?{target:c}:c,l=isNaN(+o)?o:+o,d=n(l,a);return ie(u).map(function(g){return b(b({},g),{event:d,delay:l})})}))).map(function(o){var a=o.delay;return b(b({},e.formatTransition(o)),{delay:a})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var s=e instanceof le?e.value:st(e,this.delimiter);if(C(s)){var o=this.getStateNode(s).initial;return void 0!==o?this.getStateNodes(((r={})[s]=o,r)):[this,this.states[s]]}var a=Object.keys(s),c=[this];return c.push.apply(c,G([],U(H(a.map(function(u){return n.getStateNode(u).getStateNodes(s[u])}))),!1)),c},t.prototype.handles=function(e){var r=Kr(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof le?e:le.create(e),n=Array.from(ct([],this.getStateNodes(r.value)));return new le(b(b({},r),{value:this.resolve(r.value),configuration:n,done:At(n,this),tags:on(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var o=this.getStateNode(e).next(r,n);return o&&o.transitions.length?o:this.next(r,n)},t.prototype.transitionCompoundNode=function(e,r,n){var s=Object.keys(e),a=this.getStateNode(s[0])._transition(e[s[0]],r,n);return a&&a.transitions.length?a:this.next(r,n)},t.prototype.transitionParallelNode=function(e,r,n){var s,o,a={};try{for(var c=N(Object.keys(e)),u=c.next();!u.done;u=c.next()){var l=u.value,d=e[l];if(d){var y=this.getStateNode(l)._transition(d,r,n);y&&(a[l]=y)}}}catch(T){s={error:T}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(s)throw s.error}}var v=Object.keys(a).map(function(T){return a[T]}),p=H(v.map(function(T){return T.transitions}));if(!v.some(function(T){return T.transitions.length>0}))return this.next(r,n);var E=H(Object.keys(a).map(function(T){return a[T].configuration}));return{transitions:p,exitSet:H(v.map(function(T){return T.exitSet})),configuration:E,source:r,actions:H(Object.keys(a).map(function(T){return a[T].actions}))}},t.prototype._transition=function(e,r,n){return C(e)?this.transitionLeafNode(e,r,n):1===Object.keys(e).length?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,X(r))},t.prototype.next=function(e,r){var n,s,l,o=this,a=r.name,c=[],u=[];try{for(var d=N(this.getCandidates(a)),g=d.next();!g.done;g=d.next()){var y=g.value,v=y.cond,p=y.in,m=e.context,E=!p||(C(p)&&We(p)?e.matches(st(this.getStateNodeById(p).path,this.delimiter)):lr(st(p,this.delimiter),ki(this.path.slice(0,-2))(e.value))),T=!1;try{T=!v||en(this.machine,v,m,r,e)}catch(_){throw new Error("Unable to evaluate guard '".concat(v.name||v.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(_.message))}if(T&&E){void 0!==y.target&&(u=y.target),c.push.apply(c,G([],U(y.actions),!1)),l=y;break}}}catch(_){n={error:_}}finally{try{g&&!g.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}if(l){if(!u.length)return{transitions:[l],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var x=H(u.map(function(_){return o.getRelativeStateNodes(_,e.historyValue)}));return{transitions:[l],exitSet:l.internal?[]:H(u.map(function(_){return o.getPotentiallyReenteringNodes(_)})),configuration:x,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var r=[],n=this,s=e;n&&n!==s;)r.push(n),n=n.parent;return n!==s?[]:(r.push(s),r)},t.prototype.getActions=function(e,r,n,s,o,a,c){var u,l,d,g,y=this,v=a?ct([],this.getStateNodes(a.value)):[],p=new Set;try{for(var m=N(Array.from(e).sort(function(k,$){return k.order-$.order})),E=m.next();!E.done;E=m.next())(!ut(v,T=E.value)||ut(n.exitSet,T)||T.parent&&p.has(T.parent))&&p.add(T)}catch(k){u={error:k}}finally{try{E&&!E.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}try{for(var x=N(v),A=x.next();!A.done;A=x.next()){var T;(!ut(e,T=A.value)||ut(n.exitSet,T.parent))&&n.exitSet.push(T)}}catch(k){d={error:k}}finally{try{A&&!A.done&&(g=x.return)&&g.call(x)}finally{if(d)throw d.error}}n.exitSet.sort(function(k,$){return $.order-k.order});var _=Array.from(p).sort(function(k,$){return k.order-$.order}),z=new Set(n.exitSet),V=H(_.map(function(k){var $=[];if("final"!==k.type)return $;var ae=k.parent;if(!ae.parent)return $;$.push(lt(k.id,k.doneData),lt(ae.id,k.doneData?Et(k.doneData,s,o):void 0));var pe=ae.parent;return"parallel"===pe.type&&at(pe).every(function(Ee){return At(n.configuration,Ee)})&&$.push(lt(pe.id)),$})),L=_.map(function(k){var $=k.onEntry,ae=k.activities.map(function(pe){return yn(pe)});return{type:"entry",actions:me(c?G(G([],U($),!1),U(ae),!1):G(G([],U(ae),!1),U($),!1),y.machine.options.actions)}}).concat({type:"state_done",actions:V.map(yr)}),B=Array.from(z).map(function(k){return{type:"exit",actions:me(G(G([],U(k.onExit),!1),U(k.activities.map(function($){return gn($)})),!1),y.machine.options.actions)}}).concat({type:"transition",actions:me(n.actions,this.machine.options.actions)}).concat(L);if(r){var Y=me(H(G([],U(e),!1).sort(function(k,$){return $.order-k.order}).map(function(k){return k.onExit})),this.machine.options.actions).filter(function(k){return k.type!==Pe&&(k.type!==Ie||!!k.to&&k.to!==se.Internal)});return B.concat({type:"stop",actions:Y})}return B},t.prototype.transition=function(e,r,n,s){void 0===e&&(e=this.initialState);var a,o=X(r);if(e instanceof le)a=void 0===n?e:this.resolveState(le.from(e,n));else{var c=C(e)?this.resolve(wt(this.getResolvedPath(e))):this.resolve(e);a=this.resolveState(le.from(c,n??this.machine.context))}if(this.strict&&!this.events.includes(o.name)&&!function Ri(t){return/^(done|error)\./.test(t)}(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var l=this._transition(a.value,a,o)||{transitions:[],configuration:[],exitSet:[],source:a,actions:[]},d=ct([],this.getStateNodes(a.value)),g=l.configuration.length?ct(d,l.configuration):d;return l.configuration=G([],U(g),!1),this.resolveTransition(l,a,a.context,s,o)},t.prototype.resolveRaisedTransition=function(e,r,n,s){var o,a=e.actions;return(e=this.transition(e,r,void 0,s))._event=n,e.event=n.data,(o=e.actions).unshift.apply(o,G([],U(a),!1)),e},t.prototype.resolveTransition=function(e,r,n,s,o){var a,c,u,l,d=this;void 0===o&&(o=Ne);var g=e.configuration,y=!r||e.transitions.length>0,v=y?e.configuration:r?r.configuration:[],p=At(v,this),m=y?ji(this.machine,g):void 0,E=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,T=this.getActions(new Set(v),p,e,n,o,r,s),x=r?b({},r.activities):{};try{for(var A=N(T),_=A.next();!_.done;_=A.next()){var z=_.value;try{for(var V=(u=void 0,N(z.actions)),L=V.next();!L.done;L=V.next()){var M=L.value;M.type===Ot?x[M.activity.id||M.activity.type]=M:M.type===kt&&(x[M.activity.id||M.activity.type]=!1)}}catch(te){u={error:te}}finally{try{L&&!L.done&&(l=V.return)&&l.call(V)}finally{if(u)throw u.error}}}}catch(te){a={error:te}}finally{try{_&&!_.done&&(c=A.return)&&c.call(A)}finally{if(a)throw a.error}}var B=U(dt(this,r,n,o,T,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),Y=B[0],k=B[1],$=U(function Ii(t,e){var r,n,s=U([[],[]],2),o=s[0],a=s[1];try{for(var c=N(t),u=c.next();!u.done;u=c.next()){var l=u.value;e(l)?o.push(l):a.push(l)}}catch(d){r={error:d}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return[o,a]}(Y,function(te){return te.type===Pe||te.type===Ie&&te.to===se.Internal}),2),ae=$[0],pe=$[1],tt=Y.filter(function(te){var nt;return te.type===Ot&&(null===(nt=te.activity)||void 0===nt?void 0:nt.type)===Pt}).reduce(function(te,nt){return te[nt.activity.id]=function Xi(t,e,r,n){var s,o=tn(t.src),a=null===(s=e?.options.services)||void 0===s?void 0:s[o.type],c=t.data?Et(t.data,r,n):void 0,u=a?An(a,t.id,c):xn(t.id);return u.meta=t,u}(nt.activity,d.machine,k,o),te},r?b({},r.children):{}),or=new le({value:m||r.value,context:k,_event:o,_sessionid:r?r._sessionid:null,historyValue:m?E?Ni(E,m):void 0:r?r.historyValue:void 0,history:!m||e.source?r:void 0,actions:m?pe:[],activities:m?x:r?r.activities:{},events:[],configuration:v,transitions:e.transitions,children:tt,done:p,tags:on(v),machine:this}),bi=n!==k;or.changed=o.name===It||bi;var rt=or.history;rt&&delete rt.history;var xi=!p&&(this._transient||g.some(function(te){return te._transient}));if(!(y||xi&&""!==o.name))return or;var ce=or;if(!p)for(xi&&(ce=this.resolveRaisedTransition(ce,{type:an},o,s));ae.length;){var ja=ae.shift();ce=this.resolveRaisedTransition(ce,ja._event,o,s)}var Ma=ce.changed||(rt?!!ce.actions.length||bi||typeof rt.value!=typeof ce.value||!bn(ce.value,rt.value):void 0);return ce.changed=Ma,ce.history=rt,ce},t.prototype.getStateNode=function(e){if(We(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=We(e)?e.slice("#".length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&We(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=dr(e,this.delimiter).slice(),n=this;r.length;){var s=r.shift();if(!s.length)break;n=n.getStateNode(s)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||Je;switch(this.type){case"parallel":return ot(this.initialStateValue,function(o,a){return o?n.getStateNode(a).resolve(e[a]||o):Je});case"compound":if(C(e)){var s=this.getStateNode(e);return"parallel"===s.type||"compound"===s.type?((r={})[e]=s.initialStateValue,r):e}return Object.keys(e).length?ot(e,function(o,a){return o?n.getStateNode(a).resolve(o):Je}):this.initialStateValue||{};default:return e||Je}},t.prototype.getResolvedPath=function(e){if(We(e)){var r=this.machine.idMap[e.slice("#".length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return dr(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e,r;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)r=Jr(this.states,function(n){return n.initialStateValue||Je},function(n){return"history"!==n.type});else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=xt(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if("history"===this.type){var r=this.config;e=C(r.target)&&We(r.target)?wt(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return void 0===n&&(n=!0),n?"history"===e.type?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;return xt(this)?[this]:"compound"!==this.type||this.initial?H(St(this.initialStateValue).map(function(n){return e.getFromRelativePath(n)})):[this]},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=U(e),n=r[0],s=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var o=this.getStateNode(n);if("history"===o.type)return o.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(s)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Jr(this.states,function(r,n){if(!e)return r.historyValue();var s=C(e)?void 0:e[n];return r.historyValue(s||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var s=this.target;return s?H(St(s).map(function(a){return n.getFromRelativePath(a)})):n.initialStateNodes}var o=function _i(t,e){return function(r){var n,s,o=r;try{for(var a=N(t),c=a.next();!c.done;c=a.next())o=o[e][c.value]}catch(l){n={error:l}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(n)throw n.error}}return o}}(n.path,"states")(e).current;return C(o)?[n.getStateNode(o)]:H(St(o).map(function(a){return"deep"===r.history?n.getFromRelativePath(a):[n.states[a[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=H(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,s;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var c=N(Object.keys(o)),u=c.next();!u.done;u=c.next()){var d=o[u.value];if(d.states)try{for(var g=(n=void 0,N(d.events)),y=g.next();!y.done;y=g.next())a.add("".concat(y.value))}catch(p){n={error:p}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(void 0!==e)return e.map(function(n){if(!C(n))return n;var s=n[0]===r.delimiter;if(s&&!r.parent)return r.getStateNodeByPath(n.slice(1));var o=s?r.key+n:n;if(!r.parent)return r.getStateNodeByPath(o);try{return r.parent.getStateNodeByPath(o)}catch(c){throw new Error("Invalid transition definition for state node '".concat(r.id,"':\n").concat(c.message))}})},t.prototype.formatTransition=function(e){var r=this,n=function Di(t){if(void 0!==t&&""!==t)return ie(t)}(e.target),s="internal"in e?e.internal:!n||n.some(function(u){return C(u)&&u[0]===r.delimiter}),o=this.machine.options.guards,a=this.resolveTarget(n),c=b(b({},e),{actions:me(ie(e.actions)),cond:Xr(e.cond,o),target:a,source:this,internal:s,eventType:e.event,toJSON:function(){return b(b({},c),{target:c.target?c.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(r.id)})}});return c},t.prototype.formatTransitions=function(){var e,r,s,n=this;if(this.config.on)if(Array.isArray(this.config.on))s=this.config.on;else{var o=this.config.on,c=o["*"],u=void 0===c?[]:c,l=ue(o,["*"]);s=H(Object.keys(l).map(function(x){return ze(x,l[x])}).concat(ze("*",u)))}else s=[];var d=this.config.always?ze("",this.config.always):[],g=this.config.onDone?ze(String(lt(this.id)),this.config.onDone):[],y=H(this.invoke.map(function(x){var A=[];return x.onDone&&A.push.apply(A,G([],U(ze(String(Ge(x.id)),x.onDone)),!1)),x.onError&&A.push.apply(A,G([],U(ze(String(Ve(x.id)),x.onError)),!1)),A})),v=this.after,p=H(G(G(G(G([],U(g),!1),U(y),!1),U(s),!1),U(d),!1).map(function(x){return ie(x).map(function(A){return n.formatTransition(A)})}));try{for(var m=N(v),E=m.next();!E.done;E=m.next())p.push(E.value)}catch(x){e={error:x}}finally{try{E&&!E.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}return p},t}();function ht(t,e){return new os(t,e)}var J=Sn,oe=be,as={deferEvents:!1},kn=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=b(b({},as),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),wr=new Map,cs=0;function Sr(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:void 0}var Er={sync:!1,autoForward:!1},W=(()=>{return(t=W||(W={}))[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",W;var t})(),fs=function(){function t(e,r){void 0===r&&(r=t.defaultOptions);var n=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=W.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(d,g){if(qe(d))return n.batch(d),n.state;var y=X(fr(d,g));if(n.status===W.Stopped)return n.state;if(n.status!==W.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(y.name,'" was sent to uninitialized service "').concat(n.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(y.data)));return n.scheduler.schedule(function(){n.forward(y);var v=n._nextState(y);n.update(v,y)}),n._state},this.sendTo=function(d,g,y){var v=n.parent&&(g===se.Parent||n.parent.id===g),p=v?n.parent:C(g)?n.children.get(g)||function(t){return wr.get(t)}(g):function Ci(t){return!!t&&"function"==typeof t.send}(g)?g:void 0;if(p)if("machine"in p){if(n.status!==W.Stopped||n.parent!==p||n.state.done){var m=b(b({},d),{name:d.name===mr?"".concat(Ve(n.id)):d.name,origin:n.sessionId});!y&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,m]):p.send(m)}}else!y&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([p,d.data]):p.send(d.data);else if(!v)throw new Error("Unable to send event to child '".concat(g,"' from service '").concat(n.id,"'."))},this._exec=function(d,g,y,v){void 0===v&&(v=n.machine.options.actions);var p=d.exec||Nt(d.type,v),m=F(p)?p:p?p.exec:d.exec;if(m)try{return m(g,y.data,n.machine.config.predictableActionArguments?{action:d,_event:y}:{action:d,state:n.state,_event:y})}catch($){throw n.parent&&n.parent.send({type:"xstate.error",data:$}),$}switch(d.type){case Ie:var E=d;if("number"==typeof E.delay)return void n.defer(E);E.to?n.sendTo(E._event,E.to,y===Ne):n.send(E._event);break;case pr:n.cancel(d.sendId);break;case Ot:if(n.status!==W.Running)return;var T=d.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[T.id||T.type])break;if(T.type===j.Invoke){var x=tn(T.src),A=n.machine.options.services?n.machine.options.services[x.type]:void 0,_=T.id,z=T.data,V="autoForward"in T?T.autoForward:!!T.forward;if(!A)return;var L=z?Et(z,g,y):void 0;if("string"==typeof A)return;var M=F(A)?A(g,y.data,{data:L,src:x,meta:T.meta}):A;if(!M)return;var B=void 0;Re(M)&&(M=L?M.withContext(L):M,B={autoForward:V}),n.spawn(M,_,B)}else n.spawnActivity(T);break;case kt:n.stopChild(d.activity.id);break;case Rt:var Y=d.label,k=d.value;Y?n.logger(Y,k):n.logger(k)}};var s=b(b({},t.defaultOptions),r),o=s.clock,a=s.logger,c=s.parent,u=s.id;this.id=void 0!==u?u:e.id,this.logger=a,this.clock=o,this.parent=c,this.options=s,this.scheduler=new kn({deferEvents:this.options.deferEvents}),this.sessionId="x:".concat(cs++)}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:He(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,s;try{for(var o=N(e.actions),a=o.next();!a.done;a=o.next())this.exec(a.value,e,r)}catch(u){n={error:u}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,s,o,a,c,u,l,d,g=this;if(e._sessionid=this.sessionId,this._state=e,this.machine.config.predictableActionArguments&&r!==Ne||!this.options.execute)for(var y=void 0;y=this._outgoingQueue.shift();)y[0].send(y[1]);else this.execute(this.state);if(this.children.forEach(function(B){g.state.children[B.id]=B}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var v=N(this.eventListeners),p=v.next();!p.done;p=v.next())(0,p.value)(e.event)}catch(B){n={error:B}}finally{try{p&&!p.done&&(s=v.return)&&s.call(v)}finally{if(n)throw n.error}}try{for(var E=N(this.listeners),T=E.next();!T.done;T=E.next())(0,T.value)(e,e.event)}catch(B){o={error:B}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}try{for(var x=N(this.contextListeners),A=x.next();!A.done;A=x.next())(0,A.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(B){c={error:B}}finally{try{A&&!A.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}if(this.state.done){var z=e.configuration.find(function(B){return"final"===B.type&&B.parent===g.machine}),V=z&&z.doneData?Et(z.doneData,e.context,r):void 0;try{for(var L=N(this.doneListeners),M=L.next();!M.done;M=L.next())(0,M.value)(Ge(this.id,V))}catch(B){l={error:B}}finally{try{M&&!M.done&&(d=L.return)&&d.call(L)}finally{if(l)throw l.error}}this._stop(),this._stopChildren()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===W.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var s=this,o=Tt(e,r,n);this.listeners.add(o.next),this.status!==W.NotStarted&&o.next(this.state);var a=function(){s.doneListeners.delete(a),s.stopListeners.delete(a),o.complete()};return this.status===W.Stopped?o.complete():(this.onDone(a),this.onStop(a)),{unsubscribe:function(){s.listeners.delete(o.next),s.doneListeners.delete(a),s.stopListeners.delete(a)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===W.Running)return this;this.machine._init(),function(t,e){wr.set(t,e)}(this.sessionId,this),this.initialized=!0,this.status=W.Running;var n=void 0===e?this.initialState:He(this,function(){return function Yi(t){return"object"==typeof t&&null!==t&&"value"in t&&"_event"in t}(e)?r.machine.resolveState(e):r.machine.resolveState(le.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,Ne)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){F(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,r,n,s,o,a,c,u,l,d;try{for(var g=N(this.listeners),y=g.next();!y.done;y=g.next())this.listeners.delete(v=y.value)}catch(L){e={error:L}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}try{for(var p=N(this.stopListeners),m=p.next();!m.done;m=p.next())(v=m.value)(),this.stopListeners.delete(v)}catch(L){n={error:L}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(n)throw n.error}}try{for(var E=N(this.contextListeners),T=E.next();!T.done;T=E.next())this.contextListeners.delete(v=T.value)}catch(L){o={error:L}}finally{try{T&&!T.done&&(a=E.return)&&a.call(E)}finally{if(o)throw o.error}}try{for(var x=N(this.doneListeners),A=x.next();!A.done;A=x.next()){var v;this.doneListeners.delete(v=A.value)}}catch(L){c={error:L}}finally{try{A&&!A.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=W.Stopped,this._initialState=void 0;try{for(var _=N(Object.keys(this.delayedEventsMap)),z=_.next();!z.done;z=_.next())this.clock.clearTimeout(this.delayedEventsMap[z.value])}catch(L){l={error:L}}finally{try{z&&!z.done&&(d=_.return)&&d.call(_)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new kn({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=X({type:"xstate.stop"}),s=He(e,function(){var o=H(G([],U(e.state.configuration),!1).sort(function(d,g){return g.order-d.order}).map(function(d){return me(d.onExit,e.machine.options.actions)})),a=U(dt(e.machine,e.state,e.state.context,n,[{type:"exit",actions:o}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),l=new le({value:e.state.value,context:a[1],_event:n,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a[0].filter(function(d){return d.type!==Pe&&(d.type!==Ie||!!d.to&&d.to!==se.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return l.changed=!0,l});e.update(s,n),e._stopChildren(),function(t){wr.delete(t)}(e.sessionId)}),this},t.prototype.batch=function(e){var r=this;if(this.status===W.NotStarted&&this.options.deferEvents);else if(this.status!==W.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(e.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,o,a=r.state,c=!1,u=[],l=function(v){var p=X(v);r.forward(p),a=He(r,function(){return r.machine.transition(a,p,void 0,n||void 0)}),u.push.apply(u,G([],U(r.machine.config.predictableActionArguments?a.actions:a.actions.map(function(m){return function Qi(t,e){var r=t.exec;return b(b({},t),{exec:void 0!==r?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0})}(m,a)})),!1)),c=c||!!a.changed};try{for(var d=N(e),g=d.next();!g.done;g=d.next())l(g.value)}catch(v){s={error:v}}finally{try{g&&!g.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}a.changed=c,a.actions=u,r.update(a,X(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,r){var n=this;void 0===r&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var s=X(e);if(0===s.name.indexOf(vr)&&!this.state.nextEvents.some(function(a){return 0===a.indexOf(vr)}))throw s.data.data;return He(this,function(){return n.machine.transition(n.state,s,void 0,r||void 0)})},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var r,n;try{for(var s=N(this.forwardTo),o=s.next();!o.done;o=s.next()){var a=o.value,c=this.children.get(a);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(a,"'."));c.send(e)}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){void 0===n&&(n=this.machine.options.actions),this._exec(e,r.context,r._event,n)},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),null===(r=this.state)||void 0===r||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);!r||(this.removeChild(e),F(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(this.status!==W.Running)return An(e,r);if(Zr(e))return this.spawnPromise(Promise.resolve(e),r);if(F(e))return this.spawnCallback(e,r);if(function ts(t){return function es(t){try{return"function"==typeof t.send}catch{return!1}}(t)&&"id"in t}(e))return this.spawnActor(e,r);if(function Ui(t){try{return"subscribe"in t&&F(t.subscribe)}catch{return!1}}(e))return this.spawnObservable(e,r);if(Re(e))return this.spawnMachine(e,b(b({},n),{id:r}));if(function Pi(t){return null!==t&&"object"==typeof t&&"transition"in t&&"function"==typeof t.transition}(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;void 0===r&&(r={});var s=new t(e,b(b({},this.options),{parent:this,id:r.id||e.id})),o=b(b({},Er),r);o.sync&&s.onTransition(function(c){n.send(It,{state:c,id:s.id})});var a=s;return this.children.set(s.id,a),o.autoForward&&this.forwardTo.add(s.id),s.onDone(function(c){n.removeChild(s.id),n.send(X(c,{origin:s.id}))}).start(),a},t.prototype.spawnBehavior=function(e,r){var n=function ds(t,e){void 0===e&&(e={});var r=t.initialState,n=new Set,s=[],o=!1,c=function rs(t){var e;return b(((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[Te]=function(){return this},e),t)}({id:e.id,send:function(l){s.push(l),function(){if(!o){for(o=!0;s.length>0;){var l=s.shift();r=t.transition(r,l,u),n.forEach(function(d){return d.next(r)})}o=!1}}()},getSnapshot:function(){return r},subscribe:function(l,d,g){var y=Tt(l,d,g);return n.add(y),y.next(r),{unsubscribe:function(){n.delete(y)}}}}),u={parent:e.parent,self:c,id:e.id||"anonymous",observers:n};return r=t.start?t.start(u):r,c}(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,a,s=this,o=!1;e.then(function(u){o||(a=u,s.removeChild(r),s.send(X(Ge(r,u),{origin:r})))},function(u){if(!o){s.removeChild(r);var l=Ve(r,u);try{s.send(X(l,{origin:r}))}catch(d){s.devTools&&s.devTools.send(l,s.state),s.machine.strict&&s.stop()}}});var c=((n={id:r,send:function(){},subscribe:function(u,l,d){var g=Tt(u,l,d),y=!1;return e.then(function(v){y||(g.next(v),!y&&g.complete())},function(v){y||g.error(v)}),{unsubscribe:function(){return y=!0}}},stop:function(){o=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return a}})[Te]=function(){return this},n);return this.children.set(r,c),c},t.prototype.spawnCallback=function(e,r){var n,u,d,s=this,o=!1,a=new Set,c=new Set;try{d=e(function(y){u=y,c.forEach(function(v){return v(y)}),!o&&s.send(X(y,{origin:r}))},function(y){a.add(y)})}catch(y){this.send(Ve(r,y))}if(Zr(d))return this.spawnPromise(d,r);var g=((n={id:r,send:function(y){return a.forEach(function(v){return v(y)})},subscribe:function(y){var v=Tt(y);return c.add(v.next),{unsubscribe:function(){c.delete(v.next)}}},stop:function(){o=!0,F(d)&&d()},toJSON:function(){return{id:r}},getSnapshot:function(){return u}})[Te]=function(){return this},n);return this.children.set(r,g),g},t.prototype.spawnObservable=function(e,r){var n,o,s=this,a=e.subscribe(function(u){o=u,s.send(X(u,{origin:r}))},function(u){s.removeChild(r),s.send(X(Ve(r,u),{origin:r}))},function(){s.removeChild(r),s.send(X(Ge(r),{origin:r}))}),c=((n={id:r,send:function(){},subscribe:function(u,l,d){return e.subscribe(u,l,d)},stop:function(){return a.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:r}}})[Te]=function(){return this},n);return this.children.set(r,c),c},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(r){var n=r(this.state.context,e);this.spawnEffect(e.id,n)}},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,((n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}})[Te]=function(){return this},n))},t.prototype.attachDev=function(){var e=Sr();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(b(b({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:b({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}!function ls(t){if(Sr()){var e=function us(){var t=Sr();if(t&&"__xstate__"in t)return t.__xstate__}();e&&e.register(t)}}(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Te]=function(){return this},t.prototype.getSnapshot=function(){return this.status===W.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Ze,t}();function Ze(t,e){return new fs(t,e)}function Mt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var ps={read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},vs=function Tr(t,e){function r(s,o,a){if(!(typeof document>"u")){"number"==typeof(a=Mt({},e,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in a)!a[u]||(c+="; "+u,!0!==a[u]&&(c+="="+a[u].split(";")[0]));return document.cookie=s+"="+t.write(o,s)+c}}return Object.create({set:r,get:function n(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var o=document.cookie?document.cookie.split("; "):[],a={},c=0;c<o.length;c++){var u=o[c].split("="),l=u.slice(1).join("=");try{var d=decodeURIComponent(u[0]);if(a[d]=t.read(l,d),s===d)break}catch{}}return s?a[s]:a}},remove:function(s,o){r(s,"",Mt({},o,{expires:-1}))},withAttributes:function(s){return Tr(this.converter,Mt({},this.attributes,s))},withConverter:function(s){return Tr(Mt({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}(ps,{path:"/"});const br=vs;function _n(t,e){return function(){return t.apply(e,arguments)}}const{toString:Rn}=Object.prototype,{getPrototypeOf:xr}=Object,Ar=(t=Object.create(null),e=>{const r=Rn.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}),ye=t=>(t=t.toLowerCase(),e=>Ar(e)===t),Ft=t=>e=>typeof e===t,{isArray:Ye}=Array,pt=Ft("undefined");var t;const Pn=ye("ArrayBuffer"),gs=Ft("string"),Ue=Ft("function"),In=Ft("number"),Or=t=>null!==t&&"object"==typeof t,Bt=t=>{if("object"!==Ar(t))return!1;const e=xr(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},Ss=ye("Date"),Es=ye("File"),Ts=ye("Blob"),bs=ye("FileList"),Os=ye("URLSearchParams");function vt(t,e,{allOwnKeys:r=!1}={}){if(null===t||typeof t>"u")return;let n,s;if("object"!=typeof t&&(t=[t]),Ye(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const o=r?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let c;for(n=0;n<a;n++)c=o[n],e.call(null,t[c],c,t)}}function Nn(t,e){e=e.toLowerCase();const r=Object.keys(t);let s,n=r.length;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const Un=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Cn=t=>!pt(t)&&t!==Un,Cs=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&xr(Uint8Array)),js=ye("HTMLFormElement"),Dn=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Fs=ye("RegExp"),Ln=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};vt(r,(s,o)=>{!1!==e(s,o,t)&&(n[o]=s)}),Object.defineProperties(t,n)},S={isArray:Ye,isArrayBuffer:Pn,isBuffer:function ms(t){return null!==t&&!pt(t)&&null!==t.constructor&&!pt(t.constructor)&&Ue(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{const e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||Rn.call(t)===e||Ue(t.toString)&&t.toString()===e)},isArrayBufferView:function ys(t){let e;return e=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Pn(t.buffer),e},isString:gs,isNumber:In,isBoolean:t=>!0===t||!1===t,isObject:Or,isPlainObject:Bt,isUndefined:pt,isDate:Ss,isFile:Es,isBlob:Ts,isRegExp:Fs,isFunction:Ue,isStream:t=>Or(t)&&Ue(t.pipe),isURLSearchParams:Os,isTypedArray:Cs,isFileList:bs,forEach:vt,merge:function kr(){const{caseless:t}=Cn(this)&&this||{},e={},r=(n,s)=>{const o=t&&Nn(e,s)||s;e[o]=Bt(e[o])&&Bt(n)?kr(e[o],n):Bt(n)?kr({},n):Ye(n)?n.slice():n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&vt(arguments[n],r);return e},extend:(t,e,r,{allOwnKeys:n}={})=>(vt(e,(s,o)=>{t[o]=r&&Ue(s)?_n(s,r):s},{allOwnKeys:n}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,n)=>{let s,o,a;const c={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)a=s[o],(!n||n(a,t,e))&&!c[a]&&(e[a]=t[a],c[a]=!0);t=!1!==r&&xr(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:Ar,kindOfTest:ye,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length);const n=t.indexOf(e,r-=e.length);return-1!==n&&n===r},toArray:t=>{if(!t)return null;if(Ye(t))return t;let e=t.length;if(!In(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},matchAll:(t,e)=>{let r;const n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:js,hasOwnProperty:Dn,hasOwnProp:Dn,reduceDescriptors:Ln,freezeMethods:t=>{Ln(t,(e,r)=>{if(Ue(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;if(Ue(t[r])){if(e.enumerable=!1,"writable"in e)return void(e.writable=!1);e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},toObjectSet:(t,e)=>{const r={},n=s=>{s.forEach(o=>{r[o]=!0})};return Ye(t)?n(t):n(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:Nn,global:Un,isContextDefined:Cn,toJSONObject:t=>{const e=new Array(10),r=(n,s)=>{if(Or(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=Ye(n)?[]:{};return vt(n,(a,c)=>{const u=r(a,s+1);!pt(u)&&(o[c]=u)}),e[s]=void 0,o}}return n};return r(t,0)}};function Qe(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}S.inherits(Qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const jn=Qe.prototype,Mn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Mn[t]={value:t}}),Object.defineProperties(Qe,Mn),Object.defineProperty(jn,"isAxiosError",{value:!0}),Qe.from=(t,e,r,n,s,o)=>{const a=Object.create(jn);return S.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>"isAxiosError"!==c),Qe.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};const q=Qe;var Fn=ne(593),Bs=ne.n(Fn);const qs=Fn;function _r(t){return S.isPlainObject(t)||S.isArray(t)}function Bn(t){return S.endsWith(t,"[]")?t.slice(0,-2):t}function qn(t,e,r){return t?t.concat(e).map(function(s,o){return s=Bn(s),!r&&o?"["+s+"]":s}).join(r?".":""):e}const $s=S.toFlatObject(S,{},null,function(e){return/^is[A-Z]/.test(e)}),qt=function Vs(t,e,r){if(!S.isObject(t))throw new TypeError("target must be an object");e=e||new(qs||FormData);const n=(r=S.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,E){return!S.isUndefined(E[m])})).metaTokens,s=r.visitor||d,o=r.dots,a=r.indexes,u=(r.Blob||typeof Blob<"u"&&Blob)&&function Gs(t){return t&&S.isFunction(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator]}(e);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function l(p){if(null===p)return"";if(S.isDate(p))return p.toISOString();if(!u&&S.isBlob(p))throw new q("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(p)||S.isTypedArray(p)?u&&"function"==typeof Blob?new Blob([p]):Buffer.from(p):p}function d(p,m,E){let T=p;if(p&&!E&&"object"==typeof p)if(S.endsWith(m,"{}"))m=n?m:m.slice(0,-2),p=JSON.stringify(p);else if(S.isArray(p)&&function zs(t){return S.isArray(t)&&!t.some(_r)}(p)||S.isFileList(p)||S.endsWith(m,"[]")&&(T=S.toArray(p)))return m=Bn(m),T.forEach(function(A,_){!S.isUndefined(A)&&null!==A&&e.append(!0===a?qn([m],_,o):null===a?m:m+"[]",l(A))}),!1;return!!_r(p)||(e.append(qn(E,m,o),l(p)),!1)}const g=[],y=Object.assign($s,{defaultVisitor:d,convertValue:l,isVisitable:_r});if(!S.isObject(t))throw new TypeError("data must be an object");return function v(p,m){if(!S.isUndefined(p)){if(-1!==g.indexOf(p))throw Error("Circular reference detected in "+m.join("."));g.push(p),S.forEach(p,function(T,x){!0===(!(S.isUndefined(T)||null===T)&&s.call(e,T,S.isString(x)?x.trim():x,m,y))&&v(T,m?m.concat(x):[x])}),g.pop()}}(t),e};function zn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function $n(t,e){this._pairs=[],t&&qt(t,this,e)}const Gn=$n.prototype;Gn.append=function(e,r){this._pairs.push([e,r])},Gn.toString=function(e){const r=e?function(n){return e.call(this,n,zn)}:zn;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};const Vn=$n;function Hs(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Hn(t,e,r){if(!e)return t;const n=r&&r.encode||Hs,s=r&&r.serialize;let o;if(o=s?s(e,r):S.isURLSearchParams(e)?e.toString():new Vn(e,r).toString(n),o){const a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}const Kn=class Ks{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){S.forEach(this.handlers,function(n){null!==n&&e(n)})}},Jn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Js=typeof URLSearchParams<"u"?URLSearchParams:Vn,Ws=FormData,Zs=(()=>{let t;return(!(typeof navigator<"u")||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&typeof window<"u"&&typeof document<"u"})(),Ys=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,de={isBrowser:!0,classes:{URLSearchParams:Js,FormData:Ws,Blob},isStandardBrowserEnv:Zs,isStandardBrowserWebWorkerEnv:Ys,protocols:["http","https","file","blob","url","data"]},Wn=function to(t){function e(r,n,s,o){let a=r[o++];const c=Number.isFinite(+a),u=o>=r.length;return a=!a&&S.isArray(s)?s.length:a,u?(s[a]=S.hasOwnProp(s,a)?[s[a],n]:n,!c):((!s[a]||!S.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],o)&&S.isArray(s[a])&&(s[a]=function eo(t){const e={},r=Object.keys(t);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],e[o]=t[o];return e}(s[a])),!c)}if(S.isFormData(t)&&S.isFunction(t.entries)){const r={};return S.forEachEntry(t,(n,s)=>{e(function Xs(t){return S.matchAll(/\w+|\[(\w*)]/g,t).map(e=>"[]"===e[0]?"":e[1]||e[0])}(n),s,r,0)}),r}return null},ro={"Content-Type":void 0},zt={transitional:Jn,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=S.isObject(e);if(o&&S.isHTMLForm(e)&&(e=new FormData(e)),S.isFormData(e))return s&&s?JSON.stringify(Wn(e)):e;if(S.isArrayBuffer(e)||S.isBuffer(e)||S.isStream(e)||S.isFile(e)||S.isBlob(e))return e;if(S.isArrayBufferView(e))return e.buffer;if(S.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function Qs(t,e){return qt(t,new de.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return de.isNode&&S.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}(e,this.formSerializer).toString();if((c=S.isFileList(e))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return qt(c?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),function no(t,e,r){if(S.isString(t))try{return(e||JSON.parse)(t),S.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(t)}(e)):e}],transformResponse:[function(e){const r=this.transitional||zt.transitional,n=r&&r.forcedJSONParsing,s="json"===this.responseType;if(e&&S.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(c){if(a)throw"SyntaxError"===c.name?q.from(c,q.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};S.forEach(["delete","get","head"],function(e){zt.headers[e]={}}),S.forEach(["post","put","patch"],function(e){zt.headers[e]=S.merge(ro)});const Rr=zt,io=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Zn=Symbol("internals");function mt(t){return t&&String(t).trim().toLowerCase()}function $t(t){return!1===t||null==t?t:S.isArray(t)?t.map($t):String(t)}function Yn(t,e,r,n){if(S.isFunction(n))return n.call(this,e,r);if(S.isString(e)){if(S.isString(n))return-1!==e.indexOf(n);if(S.isRegExp(n))return n.test(e)}}class Gt{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function o(c,u,l){const d=mt(u);if(!d)throw new Error("header name must be a non-empty string");const g=S.findKey(s,d);(!g||void 0===s[g]||!0===l||void 0===l&&!1!==s[g])&&(s[g||u]=$t(c))}const a=(c,u)=>S.forEach(c,(l,d)=>o(l,d,u));return S.isPlainObject(e)||e instanceof this.constructor?a(e,r):S.isString(e)&&(e=e.trim())&&!function ao(t){return/^[-_a-zA-Z]+$/.test(t.trim())}(e)?a((t=>{const e={};let r,n,s;return t&&t.split("\n").forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&io[r])&&("set-cookie"===r?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e})(e),r):null!=e&&o(r,e,n),this}get(e,r){if(e=mt(e)){const n=S.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(!0===r)return function oo(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}(s);if(S.isFunction(r))return r.call(this,s,n);if(S.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=mt(e)){const n=S.findKey(this,e);return!(!n||r&&!Yn(0,this[n],n,r))}return!1}delete(e,r){const n=this;let s=!1;function o(a){if(a=mt(a)){const c=S.findKey(n,a);c&&(!r||Yn(0,n[c],c,r))&&(delete n[c],s=!0)}}return S.isArray(e)?e.forEach(o):o(e),s}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const r=this,n={};return S.forEach(this,(s,o)=>{const a=S.findKey(n,o);if(a)return r[a]=$t(s),void delete r[o];const c=e?function co(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}(o):String(o).trim();c!==o&&delete r[o],r[c]=$t(s),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return S.forEach(this,(n,s)=>{null!=n&&!1!==n&&(r[s]=e&&S.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[Zn]=this[Zn]={accessors:{}}).accessors,s=this.prototype;function o(a){const c=mt(a);n[c]||(function uo(t,e){const r=S.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,o,a){return this[n].call(this,e,s,o,a)},configurable:!0})})}(s,a),n[c]=!0)}return S.isArray(e)?e.forEach(o):o(e),this}}Gt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),S.freezeMethods(Gt.prototype),S.freezeMethods(Gt);const ge=Gt;function Pr(t,e){const r=this||Rr,n=e||r,s=ge.from(n.headers);let o=n.data;return S.forEach(t,function(c){o=c.call(r,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function Qn(t){return!(!t||!t.__CANCEL__)}function Xn(t,e,r){q.call(this,t??"canceled",q.ERR_CANCELED,e,r),this.name="CanceledError"}S.inherits(Xn,q,{__CANCEL__:!0});const Vt=Xn,ho=de.isStandardBrowserEnv?{write:function(r,n,s,o,a,c){const u=[];u.push(r+"="+encodeURIComponent(n)),S.isNumber(s)&&u.push("expires="+new Date(s).toGMTString()),S.isString(o)&&u.push("path="+o),S.isString(a)&&u.push("domain="+a),!0===c&&u.push("secure"),document.cookie=u.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function ei(t,e){return t&&!function po(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}(e)?function vo(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const mo=de.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(o){let a=o;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const c=S.isString(a)?s(a):a;return c.protocol===n.protocol&&c.host===n.host}}():function(){return!0};function ti(t,e){let r=0;const n=function go(t,e){t=t||10;const r=new Array(t),n=new Array(t);let a,s=0,o=0;return e=void 0!==e?e:1e3,function(u){const l=Date.now(),d=n[o];a||(a=l),r[s]=u,n[s]=l;let g=o,y=0;for(;g!==s;)y+=r[g++],g%=t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),l-a<e)return;const v=d&&l-d;return v?Math.round(1e3*y/v):void 0}}(50,250);return s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,c=o-r,u=n(c);r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&o<=a?(a-o)/u:void 0,event:s};d[e?"download":"upload"]=!0,t(d)}}const Ht={http:null,xhr:typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(r,n){let s=t.data;const o=ge.from(t.headers).normalize(),a=t.responseType;let c;function u(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}S.isFormData(s)&&(de.isStandardBrowserEnv||de.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let l=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(v+":"+p))}const d=ei(t.baseURL,t.url);function g(){if(!l)return;const v=ge.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());(function fo(t,e,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new q("Request failed with status code "+r.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)})(function(T){r(T),u()},function(T){n(T),u()},{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:v,config:t,request:l}),l=null}if(l.open(t.method.toUpperCase(),Hn(d,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=g:l.onreadystatechange=function(){!l||4!==l.readyState||0===l.status&&(!l.responseURL||0!==l.responseURL.indexOf("file:"))||setTimeout(g)},l.onabort=function(){!l||(n(new q("Request aborted",q.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new q("Network Error",q.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),n(new q(p,(t.transitional||Jn).clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,t,l)),l=null},de.isStandardBrowserEnv){const v=(t.withCredentials||mo(d))&&t.xsrfCookieName&&ho.read(t.xsrfCookieName);v&&o.set(t.xsrfHeaderName,v)}void 0===s&&o.setContentType(null),"setRequestHeader"in l&&S.forEach(o.toJSON(),function(p,m){l.setRequestHeader(m,p)}),S.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&"json"!==a&&(l.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",ti(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",ti(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=v=>{!l||(n(!v||v.type?new Vt(null,t,l):v),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const y=function yo(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(d);y&&-1===de.protocols.indexOf(y)?n(new q("Unsupported protocol "+y+":",q.ERR_BAD_REQUEST,t)):l.send(s||null)})}};S.forEach(Ht,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});function Ir(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Vt(null,t)}function ri(t){return Ir(t),t.headers=ge.from(t.headers),t.data=Pr.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),(t=>{t=S.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let s=0;s<e&&(r=t[s],!(n=S.isString(r)?Ht[r.toLowerCase()]:r));s++);if(!n)throw!1===n?new q(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(S.hasOwnProp(Ht,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!S.isFunction(n))throw new TypeError("adapter is not a function");return n})(t.adapter||Rr.adapter)(t).then(function(n){return Ir(t),n.data=Pr.call(t,t.transformResponse,n),n.headers=ge.from(n.headers),n},function(n){return Qn(n)||(Ir(t),n&&n.response&&(n.response.data=Pr.call(t,t.transformResponse,n.response),n.response.headers=ge.from(n.response.headers))),Promise.reject(n)})}const ni=t=>t instanceof ge?t.toJSON():t;function Xe(t,e){e=e||{};const r={};function n(l,d,g){return S.isPlainObject(l)&&S.isPlainObject(d)?S.merge.call({caseless:g},l,d):S.isPlainObject(d)?S.merge({},d):S.isArray(d)?d.slice():d}function s(l,d,g){return S.isUndefined(d)?S.isUndefined(l)?void 0:n(void 0,l,g):n(l,d,g)}function o(l,d){if(!S.isUndefined(d))return n(void 0,d)}function a(l,d){return S.isUndefined(d)?S.isUndefined(l)?void 0:n(void 0,l):n(void 0,d)}function c(l,d,g){return g in e?n(l,d):g in t?n(void 0,l):void 0}const u={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(l,d)=>s(ni(l),ni(d),!0)};return S.forEach(Object.keys(t).concat(Object.keys(e)),function(d){const g=u[d]||s,y=g(t[d],e[d],d);S.isUndefined(y)&&g!==c||(r[d]=y)}),r}const Nr={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Nr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const si={};Nr.transitional=function(e,r,n){function s(o,a){return"[Axios v1.2.6] Transitional option '"+o+"'"+a+(n?". "+n:"")}return(o,a,c)=>{if(!1===e)throw new q(s(a," has been removed"+(r?" in "+r:"")),q.ERR_DEPRECATED);return r&&!si[a]&&(si[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),!e||e(o,a,c)}};const Ur={assertOptions:function Eo(t,e,r){if("object"!=typeof t)throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],a=e[o];if(a){const c=t[o],u=void 0===c||a(c,o,t);if(!0!==u)throw new q("option "+o+" must be "+u,q.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new q("Unknown option "+o,q.ERR_BAD_OPTION)}},validators:Nr},xe=Ur.validators;class Kt{constructor(e){this.defaults=e,this.interceptors={request:new Kn,response:new Kn}}request(e,r){"string"==typeof e?(r=r||{}).url=e:r=e||{},r=Xe(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;let a;void 0!==n&&Ur.assertOptions(n,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),void 0!==s&&Ur.assertOptions(s,{encode:xe.function,serialize:xe.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase(),a=o&&S.merge(o.common,o[r.method]),a&&S.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),r.headers=ge.concat(a,o);const c=[];let u=!0;this.interceptors.request.forEach(function(m){"function"==typeof m.runWhen&&!1===m.runWhen(r)||(u=u&&m.synchronous,c.unshift(m.fulfilled,m.rejected))});const l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});let d,y,g=0;if(!u){const p=[ri.bind(this),void 0];for(p.unshift.apply(p,c),p.push.apply(p,l),y=p.length,d=Promise.resolve(r);g<y;)d=d.then(p[g++],p[g++]);return d}y=c.length;let v=r;for(g=0;g<y;){const p=c[g++],m=c[g++];try{v=p(v)}catch(E){m.call(this,E);break}}try{d=ri.call(this,v)}catch(p){return Promise.reject(p)}for(g=0,y=l.length;g<y;)d=d.then(l[g++],l[g++]);return d}getUri(e){return Hn(ei((e=Xe(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}S.forEach(["delete","get","head","options"],function(e){Kt.prototype[e]=function(r,n){return this.request(Xe(n||{},{method:e,url:r,data:(n||{}).data}))}}),S.forEach(["post","put","patch"],function(e){function r(n){return function(o,a,c){return this.request(Xe(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Kt.prototype[e]=r(),Kt.prototype[e+"Form"]=r(!0)});const Jt=Kt;class Cr{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(c=>{n.subscribe(c),o=c}).then(s);return a.cancel=function(){n.unsubscribe(o)},a},e(function(o,a,c){n.reason||(n.reason=new Vt(o,a,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);-1!==r&&this._listeners.splice(r,1)}static source(){let e;return{token:new Cr(function(s){e=s}),cancel:e}}}const To=Cr,Dr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Dr).forEach(([t,e])=>{Dr[e]=t});const Ao=Dr,Z=function oi(t){const e=new Jt(t),r=_n(Jt.prototype.request,e);return S.extend(r,Jt.prototype,e,{allOwnKeys:!0}),S.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return oi(Xe(t,s))},r}(Rr);Z.Axios=Jt,Z.CanceledError=Vt,Z.CancelToken=To,Z.isCancel=Qn,Z.VERSION="1.2.6",Z.toFormData=qt,Z.AxiosError=q,Z.Cancel=Z.CanceledError,Z.all=function(e){return Promise.all(e)},Z.spread=function bo(t){return function(r){return t.apply(null,r)}},Z.isAxiosError=function xo(t){return S.isObject(t)&&!0===t.isAxiosError},Z.mergeConfig=Xe,Z.AxiosHeaders=ge,Z.formToJSON=t=>Wn(S.isHTMLForm(t)?new FormData(t):t),Z.HttpStatusCode=Ao,Z.default=Z;const Wt=Z;var Oo=Object.defineProperty,we=(t,e,r)=>(((t,e,r)=>{e in t?Oo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r})(t,"symbol"!=typeof e?e+"":e,r),r);const Zt="nhostRefreshToken",Yt="nhostRefreshTokenExpiresAt";class Qt extends Error{constructor(e){super(e.message),we(this,"error"),Error.captureStackTrace(this,this.constructor),e instanceof Error?(this.name=e.name,this.error={error:e.name,status:1,message:e.message}):(this.name=e.error,this.error=e)}}const Ae={status:10,error:"invalid-email",message:"Email is incorrectly formatted"},Lr={status:10,error:"invalid-password",message:"Password is incorrectly formatted"},ui={status:10,error:"invalid-phone-number",message:"Phone number is incorrectly formatted"},Uo={status:10,error:"invalid-mfa-ticket",message:"MFA ticket is invalid"},Co={status:10,error:"no-mfa-ticket",message:"No MFA ticket has been provided"},Do={status:10,error:"no-refresh-token",message:"No refresh token has been provided"},Lo={status:20,error:"refresher-already-running",message:"The token refresher is already running. You must wait until is has finished before submitting a new token."},Se={status:20,error:"already-signed-in",message:"User is already signed in"},jo={status:20,error:"unauthenticated-user",message:"User is not authenticated"},Mo={status:20,error:"unverified-user",message:"Email needs verification"},Fo={status:10,error:"invalid-refresh-token",message:"Invalid or expired refresh token"},Bo={status:1,error:"invalid-sign-in-method",message:"Invalid sign-in method"},jr={user:null,mfa:null,accessToken:{value:null,expiresAt:null},refreshTimer:{startedAt:null,attempts:0,lastAttempt:null},refreshToken:{value:null},importTokenAttempts:0,errors:{}};function qo(t){return(new TextEncoder).encode(t)}function Ce(t){const e=new Uint8Array(t);let r="";for(const n of e)r+=String.fromCharCode(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Mr(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=e.padEnd(e.length+(4-e.length%4)%4,"="),s=atob(n),o=new ArrayBuffer(s.length),a=new Uint8Array(o);for(let c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return o}function li(){return void 0!==window?.PublicKeyCredential&&"function"==typeof window.PublicKeyCredential}function di(t){const{id:e}=t;return{...t,id:Mr(e),transports:t.transports}}function fi(t){return"localhost"===t||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}class ee extends Error{constructor(e,r="WebAuthnError"){super(e),this.name=r}}function zo({error:t,options:e}){var r,n;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal===(new AbortController).signal)return new ee("Registration ceremony was sent an abort signal","AbortError")}else if("ConstraintError"===t.name){if(!0===(null===(r=s.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new ee("Discoverable credentials were required but no available authenticator supported it","ConstraintError");if("required"===(null===(n=s.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new ee("User verification was required but no available authenticator supported it","ConstraintError")}else{if("InvalidStateError"===t.name)return new ee("The authenticator was previously registered","InvalidStateError");if("NotAllowedError"===t.name)return new ee("User clicked cancel, or the registration ceremony timed out","NotAllowedError");if("NotSupportedError"===t.name)return 0===s.pubKeyCredParams.filter(o=>"public-key"===o.type).length?new ee('No entry in pubKeyCredParams was of type "public-key"',"NotSupportedError"):new ee("No available authenticator supported any of the specified pubKeyCredParams algorithms","NotSupportedError");if("SecurityError"===t.name){const o=window.location.hostname;if(!fi(o))return new ee(`${window.location.hostname} is an invalid domain`,"SecurityError");if(s.rp.id!==o)return new ee(`The RP ID "${s.rp.id}" is invalid for this domain`,"SecurityError")}else if("TypeError"===t.name){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ee("User ID was not between 1 and 64 characters","TypeError")}else if("UnknownError"===t.name)return new ee("The authenticator was unable to process the specified options, or could not create a new credential","UnknownError")}return t}const Xt=new class $o{createNewAbortSignal(){return this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal}reset(){this.controller=void 0}};function hi(t){return Fr.apply(this,arguments)}function Fr(){return Fr=(0,R.Z)(function*(t){if(!li())throw new Error("WebAuthn is not supported in this browser");const e={publicKey:{...t,challenge:Mr(t.challenge),user:{...t.user,id:qo(t.user.id)},excludeCredentials:t.excludeCredentials.map(di)}};let r;e.signal=Xt.createNewAbortSignal();try{r=yield navigator.credentials.create(e)}catch(u){throw zo({error:u,options:e})}finally{Xt.reset()}if(!r)throw new Error("Registration was not completed");const{id:n,rawId:s,response:o,type:a}=r,c={id:n,rawId:Ce(s),response:{attestationObject:Ce(o.attestationObject),clientDataJSON:Ce(o.clientDataJSON)},type:a,clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:r.authenticatorAttachment};return"function"==typeof o.getTransports&&(c.transports=o.getTransports()),c}),Fr.apply(this,arguments)}function Go(t){return new TextDecoder("utf-8").decode(t)}function Vo(){return Br.apply(this,arguments)}function Br(){return Br=(0,R.Z)(function*(){if(navigator.credentials.conditionalMediationSupported)return!0;const t=window.PublicKeyCredential;return void 0!==t.isConditionalMediationAvailable&&t.isConditionalMediationAvailable()}),Br.apply(this,arguments)}function Ho({error:t,options:e}){var r;const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===t.name){if(e.signal===(new AbortController).signal)return new ee("Authentication ceremony was sent an abort signal","AbortError")}else{if("NotAllowedError"===t.name)return null!==(r=n.allowCredentials)&&void 0!==r&&r.length?new ee("No available authenticator recognized any of the allowed credentials","NotAllowedError"):new ee("User clicked cancel, or the authentication ceremony timed out","NotAllowedError");if("SecurityError"===t.name){const s=window.location.hostname;if(!fi(s))return new ee(`${window.location.hostname} is an invalid domain`,"SecurityError");if(n.rpId!==s)return new ee(`The RP ID "${n.rpId}" is invalid for this domain`,"SecurityError")}else if("UnknownError"===t.name)return new ee("The authenticator was unable to process the specified options, or could not create a new assertion signature","UnknownError")}return t}function qr(){return qr=(0,R.Z)(function*(t,e=!1){var r,n;if(!li())throw new Error("WebAuthn is not supported in this browser");let s;0!==(null===(r=t.allowCredentials)||void 0===r?void 0:r.length)&&(s=null===(n=t.allowCredentials)||void 0===n?void 0:n.map(di));const o={...t,challenge:Mr(t.challenge),allowCredentials:s},a={};if(e){if(!(yield Vo()))throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete*='webauthn']").length<1)throw Error('No <input> with `"webauthn"` in its `autocomplete` attribute was detected');a.mediation="conditional",o.allowCredentials=[]}let c;a.publicKey=o,a.signal=Xt.createNewAbortSignal();try{c=yield navigator.credentials.get(a)}catch(v){throw Ho({error:v,options:a})}finally{Xt.reset()}if(!c)throw new Error("Authentication was not completed");const{id:u,rawId:l,response:d,type:g}=c;let y;return d.userHandle&&(y=Go(d.userHandle)),{id:u,rawId:Ce(l),response:{authenticatorData:Ce(d.authenticatorData),clientDataJSON:Ce(d.clientDataJSON),signature:Ce(d.signature),userHandle:y},type:g,clientExtensionResults:c.getClientExtensionResults(),authenticatorAttachment:c.authenticatorAttachment}}),qr.apply(this,arguments)}const er=typeof window<"u",tr=new Map,Jo=t=>{var e;return er&&typeof localStorage<"u"?localStorage.getItem(t):null!=(e=tr.get(t))?e:null},Wo=(t,e)=>{er&&typeof localStorage<"u"?e?localStorage.setItem(t,e):localStorage.removeItem(t):e?tr.set(t,e):tr.has(t)&&tr.delete(t)},Yo=(t,e)=>{if("localStorage"===t||"web"===t)return Wo;if("cookie"===t)return(r,n)=>{er&&(n?br.set(r,n,{expires:30,sameSite:"lax",httpOnly:!1}):br.remove(r))};if(!e)throw Error(`clientStorageType is set to '${t}' but no clienStorage has been given`);if("react-native"===t)return(r,n)=>{var s,o;return n?null==(s=e.setItem)?void 0:s.call(e,r,n):null==(o=e.removeItem)?void 0:o.call(e,r)};if("capacitor"===t)return(r,n)=>{var s,o;return n?null==(s=e.set)?void 0:s.call(e,{key:r,value:n}):null==(o=e.remove)?void 0:o.call(e,{key:r})};if("expo-secure-storage"===t)return function(){var r=(0,R.Z)(function*(n,s){var o,a;return s?null==(o=e.setItemAsync)?void 0:o.call(e,n,s):null==(a=e.deleteItemAsync)?void 0:a.call(e,n)});return function(n,s){return r.apply(this,arguments)}}();if("custom"===t){if(!e.removeItem)throw Error("clientStorageType is set to 'custom' but clientStorage is missing a removeItem property");if(e.setItem)return(r,n)=>{var s,o;return n?null==(s=e.setItem)?void 0:s.call(e,r,n):null==(o=e.removeItem)?void 0:o.call(e,r)};if(e.setItemAsync)return function(){var r=(0,R.Z)(function*(n,s){var o,a;return s?null==(o=e.setItemAsync)?void 0:o.call(e,n,s):null==(a=e.removeItem)?void 0:a.call(e,n)});return function(n,s){return r.apply(this,arguments)}}();throw Error("clientStorageType is set to 'custom' but clientStorage is missing setItem or setItemAsync property")}throw Error(`Unknown storage type: ${t}`)},De=t=>{const e=Wt.create({baseURL:t});return e.interceptors.response.use(r=>r,r=>{var n,s,o,a,c,u,l,d,g,y,v,p;return Promise.reject({error:{message:null!=(c=null!=(a=null!=(o=null==(s=null==(n=r.response)?void 0:n.data)?void 0:s.message)?o:r.message)?a:r.request.responseText)?c:JSON.stringify(r),status:null!=(y=null!=(g=null==(u=r.response)?void 0:u.status)?g:null==(d=null==(l=r.response)?void 0:l.data)?void 0:d.statusCode)?y:0,error:(null==(p=null==(v=r.response)?void 0:v.data)?void 0:p.error)||r.request.statusText||"network"}})}),e},rr=t=>t&&t.accessToken.value&&t.refreshToken.value&&t.accessToken.expiresAt&&t.user?{accessToken:t.accessToken.value,accessTokenExpiresIn:(t.accessToken.expiresAt.getTime()-Date.now())/1e3,refreshToken:t.refreshToken.value,user:t.user}:null,Le=({accessToken:t,isError:e,user:r,error:n})=>e?{session:null,error:n}:r&&t?{session:{accessToken:t,accessTokenExpiresIn:0,refreshToken:"",user:r},error:null}:{session:null,error:null},pi=(t,e)=>{const r=e&&Object.entries(e).map(([n,s])=>{const o=Array.isArray(s)?s.join(","):"object"==typeof s?JSON.stringify(s):s;return`${n}=${encodeURIComponent(o)}`}).join("&");return r?`${t}?${r}`:t},he=(t,e)=>{if(null==e||!e.redirectTo)return e;const{redirectTo:r,...n}=e;if(!t)return r.startsWith("/")?n:e;const s=new URL(t),o=Object.fromEntries(new URLSearchParams(s.search)),a=new URL(r.startsWith("/")?s.origin+r:r),c=new URLSearchParams(a.search);let u=Object.fromEntries(c);r.startsWith("/")&&(u={...o,...u});let l=s.pathname;return a.pathname.length>1&&(l+=a.pathname.slice(1)),{...n,redirectTo:pi(a.origin+l,u)}};function nr(t,e){var r;if(!e){if(typeof window>"u")return;e=(null==(r=window.location)?void 0:r.href)||""}t=t.replace(/[\[\]]/g,"\\$&");const s=new RegExp("[?&#]"+t+"(=([^&#]*)|&|#|$)").exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}function vi(t){var e;if(typeof window>"u")return;const r=window?.location;if(r&&r){const n=new URLSearchParams(r.search),s=new URLSearchParams(null==(e=r.hash)?void 0:e.slice(1));n.delete(t),s.delete(t);let o=window.location.pathname;Array.from(n).length&&(o+=`?${n.toString()}`),Array.from(s).length&&(o+=`#${s.toString()}`),window.history.pushState({},"",o)}}const Oe=t=>!!t&&"string"==typeof t&&!!String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),$r=t=>!!t&&"string"==typeof t&&t.length>=3,mi=t=>!!t&&"string"==typeof t,Xo=({backendUrl:t,clientUrl:e,clientStorageGetter:r,clientStorageSetter:n,clientStorageType:s="web",clientStorage:o,refreshIntervalTime:a,autoRefreshToken:c=!0,autoSignIn:u=!0})=>{const l=r||((t,e)=>{if("localStorage"===t||"web"===t)return Jo;if("cookie"===t)return r=>{var n;return er&&null!=(n=br.get(r))?n:null};if(!e)throw Error(`clientStorageType is set to '${t}' but no clientStorage has been given`);if("react-native"===t)return r=>{var n;return null==(n=e.getItem)?void 0:n.call(e,r)};if("capacitor"===t)return r=>{var n;return null==(n=e.get)?void 0:n.call(e,{key:r})};if("expo-secure-storage"===t)return r=>{var n;return null==(n=e.getItemAsync)?void 0:n.call(e,r)};if("custom"===t){if(e.getItem&&e.removeItem)return e.getItem;if(e.getItemAsync)return e.getItemAsync;throw Error('clientStorageType is set to \'custom\' but clientStorage is missing either "getItem" and "removeItem" properties or "getItemAsync" property')}throw Error(`Unknown storage type: ${t}`)})(s,o),d=n||Yo(s,o),g=De(t),y=function(){var v=(0,R.Z)(function*(p,m,E){return(yield g.post(p,m,E)).data});return function(m,E,T){return v.apply(this,arguments)}}();return ht({schema:{context:{},events:{},services:{}},tsTypes:{},context:jr,predictableActionArguments:!0,id:"nhost",type:"parallel",states:{authentication:{initial:"starting",on:{SESSION_UPDATE:[{cond:"hasSession",actions:["saveSession","resetTimer","reportTokenChanged"],target:".signedIn"}]},states:{starting:{tags:["loading"],always:{cond:"isSignedIn",target:"signedIn"},invoke:{id:"importRefreshToken",src:"importRefreshToken",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"signedIn"},{target:"signedOut"}],onError:[{cond:"shouldRetryImportToken",actions:"incrementTokenImportAttempts",target:"retryTokenImport"},{actions:["saveAuthenticationError"],target:"signedOut"}]}},retryTokenImport:{tags:["loading"],after:{RETRY_IMPORT_TOKEN_DELAY:"starting"}},signedOut:{initial:"noErrors",entry:"reportSignedOut",states:{noErrors:{},success:{},needsSmsOtp:{},needsMfa:{},failed:{},signingOut:{entry:["clearContextExceptRefreshToken"],exit:["destroyRefreshToken","reportTokenChanged"],invoke:{src:"signout",id:"signingOut",onDone:{target:"success"},onError:{target:"failed",actions:["saveAuthenticationError"]}}}},on:{SIGNIN_PASSWORD:"authenticating.password",SIGNIN_ANONYMOUS:"authenticating.anonymous",SIGNIN_SECURITY_KEY_EMAIL:"authenticating.securityKeyEmail",SIGNIN_MFA_TOTP:"authenticating.mfa.totp"}},authenticating:{entry:"resetErrors",states:{password:{invoke:{src:"signInPassword",id:"authenticateUserWithPassword",onDone:[{cond:"hasMfaTicket",actions:["saveMfaTicket"],target:"#nhost.authentication.signedOut.needsMfa"},{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"}],onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},anonymous:{invoke:{src:"signInAnonymous",id:"authenticateAnonymously",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},mfa:{states:{totp:{invoke:{src:"signInMfaTotp",id:"signInMfaTotp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:["saveAuthenticationError"],target:"#nhost.authentication.signedOut.failed"}}}}},securityKeyEmail:{invoke:{src:"signInSecurityKeyEmail",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}}}},signedIn:{type:"parallel",entry:["reportSignedIn","cleanUrl","broadcastToken","resetErrors"],on:{SIGNOUT:"signedOut.signingOut"},states:{refreshTimer:{id:"timer",initial:"idle",states:{disabled:{type:"final"},stopped:{always:{cond:"noToken",target:"idle"}},idle:{always:[{cond:"isAutoRefreshDisabled",target:"disabled"},{cond:"hasRefreshToken",target:"running"}]},running:{initial:"pending",entry:"resetTimer",states:{pending:{after:{1e3:{internal:!1,target:"pending"}},always:{cond:"refreshTimerShouldRefresh",target:"refreshing"}},refreshing:{invoke:{src:"refreshToken",id:"refreshToken",onDone:{actions:["saveSession","resetTimer","reportTokenChanged"],target:"pending"},onError:[{actions:"saveRefreshAttempt",target:"pending"}]}}}}}}}}}},token:{initial:"idle",states:{idle:{on:{TRY_TOKEN:"running"},initial:"noErrors",states:{noErrors:{},error:{}}},running:{invoke:{src:"refreshToken",id:"authenticateWithToken",onDone:{actions:["saveSession","reportTokenChanged"],target:["#nhost.authentication.signedIn","idle.noErrors"]},onError:[{cond:"isSignedIn",target:"idle.error"},{actions:"saveAuthenticationError",target:["#nhost.authentication.signedOut.failed","idle.error"]}]}}}},registration:{initial:"incomplete",on:{SIGNED_IN:[{cond:"isAnonymous",target:".incomplete"},".complete"]},states:{incomplete:{on:{SIGNUP_EMAIL_PASSWORD:"emailPassword",SIGNUP_SECURITY_KEY:"securityKey",PASSWORDLESS_EMAIL:"passwordlessEmail",PASSWORDLESS_SMS:"passwordlessSms",PASSWORDLESS_SMS_OTP:"passwordlessSmsOtp"},initial:"noErrors",states:{noErrors:{},needsEmailVerification:{},needsOtp:{},failed:{}}},emailPassword:{entry:["resetErrors"],invoke:{src:"signUpEmailPassword",id:"signUpEmailPassword",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},securityKey:{entry:["resetErrors"],invoke:{src:"signUpSecurityKey",id:"signUpSecurityKey",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},passwordlessEmail:{entry:["resetErrors"],invoke:{src:"passwordlessEmail",id:"passwordlessEmail",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSms:{entry:["resetErrors"],invoke:{src:"passwordlessSms",id:"passwordlessSms",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSmsOtp:{entry:["resetErrors"],invoke:{src:"passwordlessSmsOtp",id:"passwordlessSmsOtp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},complete:{on:{SIGNED_OUT:"incomplete"}}}}}},{actions:{reportSignedIn:oe("SIGNED_IN"),reportSignedOut:oe("SIGNED_OUT"),reportTokenChanged:oe("TOKEN_CHANGED"),incrementTokenImportAttempts:J({importTokenAttempts:({importTokenAttempts:v})=>v+1}),clearContext:J(()=>(d(Yt,null),d(Zt,null),{...jr})),clearContextExceptRefreshToken:J(({refreshToken:{value:v}})=>(d(Yt,null),{...jr,refreshToken:{value:v}})),saveSession:J({user:(v,{data:p})=>{var m;return(null==(m=p?.session)?void 0:m.user)||null},accessToken:(v,{data:p})=>{if(p.session){const{accessTokenExpiresIn:m,accessToken:E}=p.session,T=new Date(Date.now()+1e3*m);return d(Yt,T.toISOString()),{value:E,expiresAt:T}}return d(Yt,null),{value:null,expiresAt:null}},refreshToken:(v,{data:p})=>{var m;const E=(null==(m=p.session)?void 0:m.refreshToken)||null;return E&&d(Zt,E),{value:E}}}),saveMfaTicket:J({mfa:(v,p)=>{var m;return null==(m=p.data)?void 0:m.mfa}}),resetTimer:J({refreshTimer:v=>({startedAt:new Date,attempts:0,lastAttempt:null})}),saveRefreshAttempt:J({refreshTimer:(v,p)=>({startedAt:v.refreshTimer.startedAt,attempts:v.refreshTimer.attempts+1,lastAttempt:new Date})}),saveAuthenticationError:J({errors:({errors:v},{data:{error:p}})=>({...v,authentication:p})}),resetErrors:J({errors:v=>({}),importTokenAttempts:v=>0}),saveRegistrationError:J({errors:({errors:v},{data:{error:p}})=>({...v,registration:p})}),destroyRefreshToken:J({refreshToken:v=>(d(Zt,null),{value:null})}),cleanUrl:()=>{u&&nr("refreshToken")&&(vi("refreshToken"),vi("type"))},broadcastToken:v=>{if(u)try{new BroadcastChannel("nhost").postMessage(v.refreshToken.value)}catch{}}},guards:{isAnonymous:(v,p)=>{var m;return!(null==(m=v.user)||!m.isAnonymous)},isSignedIn:v=>!!v.user&&!!v.refreshToken.value&&!!v.accessToken.value,noToken:v=>!v.refreshToken.value,hasRefreshToken:v=>!!v.refreshToken.value,isAutoRefreshDisabled:()=>!c,refreshTimerShouldRefresh:v=>{const{expiresAt:p}=v.accessToken;return!!p&&(v.refreshTimer.lastAttempt?Date.now()-v.refreshTimer.lastAttempt.getTime()>5e3:!!(a&&Date.now()-v.refreshTimer.startedAt.getTime()>1e3*a)||p.getTime()-Date.now()-3e5<=0)},shouldRetryImportToken:(v,p)=>0===p.data.error.status||p.data.error.status>=500,unverified:(v,{data:{error:p}})=>401===p.status&&("Email is not verified"===p.message||"unverified-user"===p.error),hasSession:(v,p)=>{var m;return!(null==(m=p.data)||!m.session)},hasMfaTicket:(v,p)=>{var m;return!(null==(m=p.data)||!m.mfa)}},services:{signInPassword:(v,{email:p,password:m})=>Oe(p)?$r(m)?y("/signin/email-password",{email:p,password:m}):Promise.reject({error:Lr}):Promise.reject({error:Ae}),passwordlessSms:(v,{phoneNumber:p,options:m})=>{var E;return mi(p)?null!=(E=v.user)&&E.isAnonymous?(console.warn("Deanonymisation from a phone number is not yet implemented in hasura-auth"),y("/user/deanonymize",{signInMethod:"passwordless",connection:"sms",phoneNumber:p,options:he(e,m)},{headers:{authorization:`Bearer ${v.accessToken.value}`}})):y("/signin/passwordless/sms",{phoneNumber:p,options:he(e,m)}):Promise.reject({error:ui})},passwordlessSmsOtp:(v,{phoneNumber:p,otp:m})=>mi(p)?y("/signin/passwordless/sms/otp",{phoneNumber:p,otp:m}):Promise.reject({error:ui}),passwordlessEmail:(v,{email:p,options:m})=>{var E;return Oe(p)?null!=(E=v.user)&&E.isAnonymous?y("/user/deanonymize",{signInMethod:"passwordless",connection:"email",email:p,options:he(e,m)},{headers:{authorization:`Bearer ${v.accessToken.value}`}}):y("/signin/passwordless/email",{email:p,options:he(e,m)}):Promise.reject({error:Ae})},signInAnonymous:v=>y("/signin/anonymous"),signInMfaTotp:(v,p)=>{var m;const E=p.ticket||(null==(m=v.mfa)?void 0:m.ticket);return E?(t=>t&&"string"==typeof t&&t.match(/^mfaTotp:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i))(E)?y("/signin/mfa/totp",{ticket:E,otp:p.otp}):Promise.reject({error:Uo}):Promise.reject({error:Co})},signInSecurityKeyEmail:(v=(0,R.Z)(function*(p,{email:m}){if(!Oe(m))throw new Qt(Ae);const E=yield y("/signin/webauthn",{email:m});let T;try{T=yield function Ko(t){return qr.apply(this,arguments)}(E)}catch(x){throw new Qt(x)}return y("/signin/webauthn/verify",{email:m,credential:T})}),function(m,E){return v.apply(this,arguments)}),refreshToken:function(){var v=(0,R.Z)(function*(p,m){const E="TRY_TOKEN"===m.type?m.token:p.refreshToken.value;return{session:yield y("/token",{refreshToken:E}),error:null}});return function(m,E){return v.apply(this,arguments)}}(),signout:(v,p)=>y("/signout",{refreshToken:v.refreshToken.value,all:!!p.all}),signUpEmailPassword:function(){var v=(0,R.Z)(function*(p,{email:m,password:E,options:T}){var x;return Oe(m)?$r(E)?null!=(x=p.user)&&x.isAnonymous?y("/user/deanonymize",{signInMethod:"email-password",email:m,password:E,options:he(e,T)},{headers:{authorization:`Bearer ${p.accessToken.value}`}}):y("/signup/email-password",{email:m,password:E,options:he(e,T)}):Promise.reject({error:Lr}):Promise.reject({error:Ae})});return function(m,E){return v.apply(this,arguments)}}(),signUpSecurityKey:function(){var v=(0,R.Z)(function*(p,{email:m,options:E}){if(!Oe(m))return Promise.reject({error:Ae});const T=E?.nickname;T&&delete E.nickname;const x=yield y("/signup/webauthn",{email:m,options:E});let A;try{A=yield hi(x)}catch(_){throw new Qt(_)}return y("/signup/webauthn/verify",{credential:A,options:{redirectTo:E?.redirectTo,nickname:T}})});return function(m,E){return v.apply(this,arguments)}}(),importRefreshToken:function(){var v=(0,R.Z)(function*(){let p=null;if(u){const E=nr("refreshToken")||null;if(E)try{return{session:yield y("/token",{refreshToken:E}),error:null}}catch(T){p=T.error}else{const T=nr("error");if(T)return Promise.reject({session:null,error:{status:10,error:T,message:nr("errorDescription")||T}})}}const m=yield l(Zt);if(m)try{return{session:yield y("/token",{refreshToken:m}),error:null}}catch(E){p=E.error}return p?Promise.reject({error:p,session:null}):{error:null,session:null}});return function(){return v.apply(this,arguments)}}()},delays:{RETRY_IMPORT_TOKEN_DELAY:({importTokenAttempts:v})=>v<5?1e3:5e3}});var v},ea=({backendUrl:t,clientUrl:e,interpreter:r})=>{const n=De(t);return ht({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changeEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:J({error:s=>Ae}),saveRequestError:J({error:(s,{data:{error:o}})=>o}),reportError:oe(s=>({type:"ERROR",error:s.error})),reportSuccess:oe("SUCCESS")},guards:{invalidEmail:(s,{email:o})=>!Oe(o)},services:{requestChange:(s=(0,R.Z)(function*(o,{email:a,options:c}){return(yield n.post("/user/email/change",{newEmail:a,options:he(e,c)},{headers:{authorization:`Bearer ${r?.getSnapshot().context.accessToken.value}`}})).data}),function(a,c){return s.apply(this,arguments)})}});var s},na=({backendUrl:t,clientUrl:e})=>{const r=De(t);return ht({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"sendVerificationEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"request",id:"request",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:J({error:n=>Ae}),saveRequestError:J({error:(n,{data:{error:s}})=>s}),reportError:oe(n=>({type:"ERROR",error:n.error})),reportSuccess:oe("SUCCESS")},guards:{invalidEmail:(n,{email:s})=>!Oe(s)},services:{request:(n=(0,R.Z)(function*(s,{email:o,options:a}){return(yield r.post("/user/email/send-verification-email",{email:o,options:he(e,a)})).data}),function(o,a){return n.apply(this,arguments)})}});var n};class ia{constructor({clientStorageType:e="web",autoSignIn:r=!0,autoRefreshToken:n=!0,start:s=!0,backendUrl:o,clientUrl:a,devTools:c,...u}){if(we(this,"backendUrl"),we(this,"clientUrl"),we(this,"machine"),we(this,"_interpreter"),we(this,"_channel"),we(this,"_subscriptions",new Set),this.backendUrl=o,this.clientUrl=a,this.machine=Xo({...u,backendUrl:o,clientUrl:a,clientStorageType:e,autoSignIn:r,autoRefreshToken:n}),s&&(this.interpreter=Ze(this.machine,{devTools:c}),this.interpreter.start()),typeof window<"u"&&r)try{this._channel=new BroadcastChannel("nhost"),this._channel.addEventListener("message",l=>{var d;const g=null==(d=this.interpreter)?void 0:d.getSnapshot().context.refreshToken.value;this.interpreter&&l.data!==g&&this.interpreter.send("TRY_TOKEN",{token:l.data})})}catch{}}get interpreter(){return this._interpreter}set interpreter(e){this._interpreter=e,e&&this._subscriptions.forEach(r=>r(this))}onStart(e){this.interpreter?e(this):this._subscriptions.add(e)}}const sa=function(){var t=(0,R.Z)(function*({backendUrl:e,interpreter:r},n){const s=De(e);try{const{data:o}=yield s.post("/user/webauthn/add",{},{headers:{authorization:`Bearer ${r?.getSnapshot().context.accessToken.value}`}});let a;try{a=yield hi(o)}catch(u){throw new Qt(u)}const{data:c}=yield s.post("/user/webauthn/verify",{credential:a,nickname:n},{headers:{authorization:`Bearer ${r?.getSnapshot().context.accessToken.value}`}});return{key:c,isError:!1,error:null,isSuccess:!0}}catch(o){const{error:a}=o;return{isError:!0,error:a,isSuccess:!1}}});return function(r,n){return t.apply(this,arguments)}}(),oa=function(){var t=(0,R.Z)(function*(e,r,n){return new Promise(s=>{e.send("REQUEST",{email:r,options:n}),e.onTransition(o=>{o.matches({idle:"error"})?s({error:o.context.error,isError:!0,needsEmailVerification:!1}):o.matches({idle:"success"})&&s({error:null,isError:!1,needsEmailVerification:!0})})})});return function(r,n,s){return t.apply(this,arguments)}}(),aa=function(){var t=(0,R.Z)(function*(e,r,n){return new Promise(s=>{e.send("REQUEST",{password:r,ticket:n}),e.onTransition(o=>{o.matches({idle:"error"})?s({error:o.context.error,isError:!0,isSuccess:!1}):o.matches({idle:"success"})&&s({error:null,isError:!1,isSuccess:!0})})})});return function(r,n,s){return t.apply(this,arguments)}}(),ca=function(){var t=(0,R.Z)(function*(e,r,n){return new Promise(s=>{e.send("REQUEST",{email:r,options:n}),e.onTransition(o=>{o.matches({idle:"error"})?s({error:o.context.error,isError:!0,isSent:!1}):o.matches({idle:"success"})&&s({error:null,isError:!1,isSent:!0})})})});return function(r,n,s){return t.apply(this,arguments)}}(),yi=(t,e,r)=>new Promise(n=>{const{changed:s}=t.send("PASSWORDLESS_EMAIL",{email:e,options:r});if(!s)return n({error:Se,isError:!0,isSuccess:!1});t.onTransition(o=>{o.matches("registration.incomplete.failed")?n({error:o.context.errors.registration||null,isError:!0,isSuccess:!1}):o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})&&n({error:null,isError:!1,isSuccess:!0})})}),gi=(t,e,r)=>new Promise(n=>{const{changed:s}=t.send("PASSWORDLESS_SMS",{phoneNumber:e,options:r});if(!s)return n({error:Se,isError:!0,isSuccess:!1,needsOtp:!1});t.onTransition(o=>{o.matches("registration.incomplete.needsOtp")?n({error:null,isError:!1,isSuccess:!1,needsOtp:!0}):o.matches("registration.incomplete.failed")&&n({error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),va=function(){var t=(0,R.Z)(function*(e,r){return new Promise(n=>{const{event:s}=e.send("SIGNOUT",{all:r});if("SIGNED_OUT"!==s.type)return n({isSuccess:!1,isError:!0,error:jo});e.onTransition(o=>{o.matches({authentication:{signedOut:"success"}})?n({isSuccess:!0,isError:!1,error:null}):o.matches("authentication.signedOut.failed")&&n({isSuccess:!1,isError:!0,error:o.context.errors.signout||null})})})});return function(r,n){return t.apply(this,arguments)}}(),wi=(t,e,r,n)=>new Promise(s=>{const{changed:o,context:a}=t.send("SIGNUP_EMAIL_PASSWORD",{email:e,password:r,options:n});if(!o)return s({error:Se,accessToken:a.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:a.user});t.onTransition(c=>{c.matches("registration.incomplete.failed")?s({accessToken:null,error:c.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):c.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?s({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):c.matches({authentication:"signedIn",registration:"complete"})&&s({accessToken:c.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:c.context.user})})});class ya{constructor({url:e,autoRefreshToken:r=!0,autoSignIn:n=!0,autoLogin:s,clientStorage:o,clientStorageType:a,clientStorageGetter:c,clientStorageSetter:u,refreshIntervalTime:l,start:d=!0}){var g;we(this,"_client"),we(this,"url"),this.url=e,this._client=new ia({backendUrl:e,clientUrl:typeof window<"u"&&(null==(g=window.location)?void 0:g.origin)||"",autoRefreshToken:r,autoSignIn:"boolean"==typeof s?s:n,start:d,clientStorage:o,clientStorageType:a,clientStorageGetter:c,clientStorageSetter:u,refreshIntervalTime:l})}signUp(e){var r=this;return(0,R.Z)(function*(){const n=yield r.waitUntilReady(),{email:s,options:o}=e;return Le("securityKey"in e?yield((t,e,r)=>new Promise(n=>{const{changed:s,context:o}=t.send("SIGNUP_SECURITY_KEY",{email:e,options:r});if(!s)return n({error:Se,accessToken:o.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:o.user});t.onTransition(a=>{a.matches("registration.incomplete.failed")?n({accessToken:null,error:a.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):a.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):a.matches({authentication:"signedIn",registration:"complete"})&&n({accessToken:a.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:a.context.user})})}))(n,s,o):yield wi(n,s,e.password,o))})()}signIn(e){var r=this;return(0,R.Z)(function*(){const n=yield r.waitUntilReady();if(!e){const s=yield(t=>new Promise(e=>{const{changed:r}=t.send("SIGNIN_ANONYMOUS");r||e({isSuccess:!1,isError:!0,error:Se,user:null,accessToken:null}),t.onTransition(n=>{n.matches({authentication:"signedIn"})&&e({isSuccess:!0,isError:!1,error:null,user:n.context.user,accessToken:n.context.accessToken.value}),n.matches({authentication:{signedOut:"failed"}})&&e({isSuccess:!1,isError:!0,error:n.context.errors.authentication||null,user:null,accessToken:null})})}))(n);return{...Le(s),mfa:null}}if("provider"in e){const{provider:s,options:o}=e,a=pi(`${r._client.backendUrl}/signin/provider/${s}`,he(r._client.clientUrl,o));return typeof window<"u"&&(window.location.href=a),{providerUrl:a,provider:s,session:null,mfa:null,error:null}}if("email"in e&&"password"in e){const s=yield((t,e,r)=>new Promise(n=>{const{changed:s,context:o}=t.send("SIGNIN_PASSWORD",{email:e,password:r});if(!s)return n({accessToken:o.accessToken.value,error:Se,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:o.user});t.onTransition(a=>{a.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,needsMfaOtp:!1,mfa:null,user:null}):a.matches({authentication:{signedOut:"needsMfa"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!0,mfa:a.context.mfa,user:null}):a.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:a.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:null}):a.matches({authentication:"signedIn"})&&n({accessToken:a.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:a.context.user})})}))(n,e.email,e.password);return s.needsEmailVerification?{session:null,mfa:null,error:Mo}:s.needsMfaOtp?{session:null,mfa:s.mfa,error:null}:{...Le(s),mfa:null}}if("email"in e&&"securityKey"in e){if(!0!==e.securityKey)throw Error("securityKey must be true");const s=yield((t,e)=>new Promise(r=>{const{changed:n,context:s}=t.send({type:"SIGNIN_SECURITY_KEY_EMAIL",email:e});if(!n)return r({accessToken:s.accessToken.value,error:Se,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?r({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):o.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):o.matches({authentication:"signedIn"})&&r({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:o.context.user})})}))(n,e.email);return{...Le(s),mfa:null}}if("email"in e){const{email:s,options:o}=e,{error:a}=yield yi(n,s,o);return{session:null,mfa:null,error:a}}if("phoneNumber"in e&&"otp"in e){const s=yield((t,e,r)=>new Promise(n=>{const{changed:s}=t.send({type:"PASSWORDLESS_SMS_OTP",phoneNumber:e,otp:r});if(!s)return n({error:Se,isError:!0,isSuccess:!1,user:null,accessToken:null});t.onTransition(o=>{o.matches({authentication:"signedIn"})?n({error:null,isError:!1,isSuccess:!0,user:o.context.user,accessToken:o.context.accessToken.value}):o.matches({registration:{incomplete:"failed"}})&&n({error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null})})}))(n,e.phoneNumber,e.otp);return{...Le(s),mfa:null}}if("phoneNumber"in e){const{error:s}=yield gi(n,e.phoneNumber,e.options);return{error:s,mfa:null,session:null}}if("otp"in e){const s=yield((t,e,r)=>new Promise(n=>{const{changed:s,context:o}=t.send("SIGNIN_MFA_TOTP",{otp:e,ticket:r});if(!s)return n({accessToken:o.accessToken.value,error:Se,isError:!0,isSuccess:!1,user:o.user});t.onTransition(a=>{a.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:a.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null}):a.matches({authentication:"signedIn"})&&n({accessToken:a.context.accessToken.value,error:null,isError:!1,isSuccess:!0,user:a.context.user})})}))(n,e.otp,e.ticket);return{...Le(s),mfa:null}}return{error:Bo,mfa:null,session:null}})()}signOut(e){var r=this;return(0,R.Z)(function*(){const n=yield r.waitUntilReady(),{error:s}=yield va(n,e?.all);return{error:s}})()}resetPassword({email:e,options:r}){var n=this;return(0,R.Z)(function*(){const s=Ze((({backendUrl:t,clientUrl:e})=>{const r=De(t);return ht({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:J({error:n=>Ae}),saveRequestError:J({error:(n,{data:{error:s}})=>s}),reportError:oe(n=>({type:"ERROR",error:n.error})),reportSuccess:oe("SUCCESS")},guards:{invalidEmail:(n,{email:s})=>!Oe(s)},services:{requestChange:(n,{email:s,options:o})=>r.post("/user/password/reset",{email:s,options:he(e,o)})}})})(n._client)).start(),{error:o}=yield ca(s,e,r);return{error:o}})()}changePassword({newPassword:e,ticket:r}){var n=this;return(0,R.Z)(function*(){const s=Ze((({backendUrl:t,interpreter:e})=>{const r=De(t);return ht({schema:{context:{},events:{},services:{}},tsTypes:{},predictableActionArguments:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidPassword",actions:"saveInvalidPasswordError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidPasswordError:J({error:n=>Lr}),saveRequestError:J({error:(n,{data:{error:s}})=>s}),reportError:oe(n=>({type:"ERROR",error:n.error})),reportSuccess:oe("SUCCESS")},guards:{invalidPassword:(n,{password:s})=>!$r(s)},services:{requestChange:(n,{password:s,ticket:o})=>r.post("/user/password",{newPassword:s,ticket:o},{headers:{authorization:`Bearer ${e?.getSnapshot().context.accessToken.value}`}})}})})(n._client)).start(),{error:o}=yield aa(s,e,r);return{error:o}})()}sendVerificationEmail({email:e,options:r}){var n=this;return(0,R.Z)(function*(){const s=Ze(na(n._client)).start(),{error:o}=yield((t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(s=>{s.matches({idle:"error"})?n({error:s.context.error,isError:!0,isSent:!1}):s.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}))(s,e,r);return{error:o}})()}changeEmail({newEmail:e,options:r}){var n=this;return(0,R.Z)(function*(){const s=Ze(ea(n._client)).start(),{error:o}=yield oa(s,e,r);return{error:o}})()}deanonymize(e){var r=this;return(0,R.Z)(function*(){const n=yield r.waitUntilReady();if("passwordless"===e.signInMethod){if("email"===e.connection){const{error:s}=yield yi(n,e.email,e.options);return{error:s}}if("sms"===e.connection){const{error:s}=yield gi(n,e.phoneNumber,e.options);return{error:s}}}if("email-password"===e.signInMethod){const{error:s}=yield wi(n,e.email,e.password,e.options);return{error:s}}throw Error("Unknown deanonymization method")})()}addSecurityKey(e){var r=this;return(0,R.Z)(function*(){const{error:n,key:s}=yield sa(r._client,e);return{error:n,key:s}})()}onTokenChanged(e){const r=n=>n.onTransition(({event:s,context:o})=>{"TOKEN_CHANGED"===s.type&&e(rr(o))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onTokenChanged was added before the interpreter started. Cannot unsubscribe listener.")}}onAuthStateChanged(e){const r=n=>n.onTransition(({event:s,context:o})=>{("SIGNED_IN"===s.type||"SIGNED_OUT"===s.type)&&e(s.type,rr(o))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onAuthStateChanged was added before the interpreter started. Cannot unsubscribe listener.")}}isAuthenticated(){var e;return!(null==(e=this._client.interpreter)||!e.getSnapshot().matches({authentication:"signedIn"}))}isAuthenticatedAsync(){var e=this;return(0,R.Z)(function*(){return(yield e.waitUntilReady()).getSnapshot().matches({authentication:"signedIn"})})()}getAuthenticationStatus(){var e;const r=(null==(e=this.client.interpreter)?void 0:e.getSnapshot().context.importTokenAttempts)||0;return this.isReady()?{isAuthenticated:this.isAuthenticated(),isLoading:!1,connectionAttempts:r}:{isAuthenticated:!1,isLoading:!0,connectionAttempts:r}}getJWTToken(){return this.getAccessToken()}getAccessToken(){var e,r;return null!=(r=null==(e=this._client.interpreter)?void 0:e.getSnapshot().context.accessToken.value)?r:void 0}getDecodedAccessToken(){const e=this.getAccessToken();return e?function Be(t,e){if("string"!=typeof t)throw new ve("Invalid token specified");var r=!0===(e=e||{}).header?0:1;try{return JSON.parse(function Fe(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Me(e).replace(/(.)/g,function(n,s){var o=s.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch{return Me(e)}}(t.split(".")[r]))}catch(n){throw new ve("Invalid token specified: "+n.message)}}(e):null}getHasuraClaims(){var e;return(null==(e=this.getDecodedAccessToken())?void 0:e["https://hasura.io/jwt/claims"])||null}getHasuraClaim(e){var r;return(null==(r=this.getHasuraClaims())?void 0:r[e.startsWith("x-hasura-")?e:`x-hasura-${e}`])||null}refreshSession(e){var r=this;return(0,R.Z)(function*(){try{const n=yield r.waitUntilReady();return new Promise(s=>{const o=e||n.getSnapshot().context.refreshToken.value;if(!o)return s({session:null,error:Do});const{changed:a}=n.send("TRY_TOKEN",{token:o});if(!a)return s({session:null,error:Lo});n.onTransition(c=>{c.matches({token:{idle:"error"}})?s({session:null,error:Fo}):"TOKEN_CHANGED"===c.event.type&&s({session:rr(c.context),error:null})})})}catch(n){return{session:null,error:n.message}}})()}getSession(){var e,r;return rr(null==(r=null==(e=this._client.interpreter)?void 0:e.getSnapshot())?void 0:r.context)}getUser(){var e,r,n;return(null==(n=null==(r=null==(e=this._client.interpreter)?void 0:e.getSnapshot())?void 0:r.context)?void 0:n.user)||null}waitUntilReady(){const e=this._client.interpreter;if(!e)throw Error("Auth interpreter not set");return e.getSnapshot().hasTag("loading")?new Promise((r,n)=>{let s=setTimeout(()=>n("The state machine is not yet ready after 15 seconds."),15e3);e.onTransition(o=>{if(!o.hasTag("loading"))return clearTimeout(s),r(e)})}):Promise.resolve(e)}isReady(){var e,r;return!(null!=(r=null==(e=this._client.interpreter)?void 0:e.getSnapshot())&&r.hasTag("loading"))}get client(){return this._client}}var ga=ne(2465),wa=Object.defineProperty,et=(t,e,r)=>(((t,e,r)=>{e in t?wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r})(t,"symbol"!=typeof e?e+"":e,r),r);class Ea{constructor({url:e}){et(this,"url"),et(this,"httpClient"),et(this,"accessToken"),et(this,"adminSecret"),this.url=e,this.httpClient=Wt.create({baseURL:this.url})}upload(e){var r=this;return(0,R.Z)(function*(){const{formData:n}=e;try{return{fileMetadata:(yield r.httpClient.post("/files",n,{headers:{...r.generateUploadHeaders(e),...r.generateAuthHeaders(),"Content-Type":"multipart/form-data"}})).data,error:null}}catch(s){return{fileMetadata:null,error:s}}})()}getPresignedUrl(e){var r=this;return(0,R.Z)(function*(){try{const{fileId:n}=e;return{presignedUrl:(yield r.httpClient.get(`/files/${n}/presignedurl`,{headers:{...r.generateAuthHeaders()}})).data,error:null}}catch(n){return{presignedUrl:null,error:n}}})()}delete(e){var r=this;return(0,R.Z)(function*(){try{const{fileId:n}=e;return yield r.httpClient.delete(`/files/${n}`,{headers:{...r.generateAuthHeaders()}}),{error:null}}catch(n){return{error:n}}})()}setAccessToken(e){return this.accessToken=e,this}setAdminSecret(e){return this.adminSecret=e,this}generateUploadHeaders(e){const{bucketId:r,name:n,id:s}=e,o={};return r&&(o["x-nhost-bucket-id"]=r),s&&(o["x-nhost-file-id"]=s),n&&(o["x-nhost-file-name"]=n),o}generateAuthHeaders(){return this.adminSecret||this.accessToken?this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}:null}}class Ta{constructor({url:e,adminSecret:r}){et(this,"url"),et(this,"api"),this.url=e,this.api=new Ea({url:e}),this.setAdminSecret(r)}upload(e){var r=this;return(0,R.Z)(function*(){let n;"file"in e?(n=new(Bs()),n.append("file",e.file)):n=e.formData;const{fileMetadata:s,error:o}=yield r.api.upload({...e,formData:n});return o?{fileMetadata:null,error:o}:s?{fileMetadata:s,error:null}:{fileMetadata:null,error:new Error("Invalid file returned")}})()}getUrl(e){return this.getPublicUrl(e)}getPublicUrl(e){const{fileId:r}=e;return`${this.url}/files/${r}`}getPresignedUrl(e){var r=this;return(0,R.Z)(function*(){const{presignedUrl:n,error:s}=yield r.api.getPresignedUrl(e);return s?{presignedUrl:null,error:s}:n?{presignedUrl:n,error:null}:{presignedUrl:null,error:new Error("Invalid file id")}})()}delete(e){var r=this;return(0,R.Z)(function*(){const{error:n}=yield r.api.delete(e);return n?{error:n}:{error:null}})()}setAccessToken(e){return this.api.setAccessToken(e),this}setAdminSecret(e){return this.api.setAdminSecret(e),this}}var xa=Object.defineProperty,re=(t,e,r)=>(((t,e,r)=>{e in t?xa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r})(t,"symbol"!=typeof e?e+"":e,r),r);const Oa=/^((?<protocol>http[s]?):\/\/)?(?<host>localhost)(:(?<port>(\d+|__\w+__)))?$/;function sr(t,e){const{backendUrl:r,subdomain:n,region:s}=t;if(r)return`${r}/v1/${e}`;if(!n)throw new Error("Either `backendUrl` or `subdomain` must be set.");const o=n.match(Oa);if(null!=o&&o.groups){const{protocol:a="http",host:c,port:u=1337}=o.groups;return function Ra(t){return function ka(){return typeof window<"u"}()||!function _a(){return typeof process<"u"&&process.env}()?null:process.env[`NHOST_${t.toUpperCase()}_URL`]}(e)||`${a}://${c}:${u}/v1/${e}`}if(!s)throw new Error('`region` must be set when using a `subdomain` other than "localhost".');return`https://${n}.${e}.${s}.nhost.run/v1`}class Na{constructor(e){re(this,"url"),re(this,"instance"),re(this,"accessToken"),re(this,"adminSecret");const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n,this.instance=Wt.create({baseURL:r})}call(e,r,n){var s=this;return(0,R.Z)(function*(){const o={...s.generateAccessTokenHeaders(),...n?.headers};let a;try{a=yield s.instance.post(e,r,{...n,headers:o})}catch(c){if(c instanceof Error)return{res:null,error:c}}return a?{res:a,error:null}:{res:null,error:new Error("Unable to make post request to funtion")}})()}setAccessToken(e){this.accessToken=e||null}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}class Ca{constructor(e){re(this,"url"),re(this,"instance"),re(this,"accessToken"),re(this,"adminSecret");const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n,this.instance=Wt.create({baseURL:r})}request(e,r,n){var s=this;return(0,R.Z)(function*(){const o={...s.generateAccessTokenHeaders(),...n?.headers,"Accept-Encoding":"*"};try{const a="",c=(yield s.instance.post("",{operationName:a||void 0,query:"string"==typeof e?e:(0,ga.S)(e),variables:r},{...n,headers:o})).data,{data:u}=c;return c.errors?{data:null,error:c.errors}:"object"!=typeof u||Array.isArray(u)||null===u?{data:null,error:new Error("incorrect response data from GraphQL server")}:{data:u,error:null}}catch(a){return a instanceof Error?{data:null,error:a}:(console.error(a),{data:null,error:new Error("Unable to get do GraphQL request")})}})()}getUrl(){return this.url}setAccessToken(e){this.accessToken=e||null}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}const La=new class Ei{constructor({refreshIntervalTime:e,clientStorageGetter:r,clientStorageSetter:n,clientStorage:s,clientStorageType:o,autoRefreshToken:a,autoSignIn:c,adminSecret:u,devTools:l,start:d=!0,...g}){re(this,"auth"),re(this,"storage"),re(this,"functions"),re(this,"graphql"),re(this,"_adminSecret"),re(this,"devTools"),this.auth=function Pa(t){const e="subdomain"in t||"backendUrl"in t?sr(t,"auth"):t.authUrl;if(!e)throw new Error("Please provide `subdomain` or `authUrl`.");return new ya({url:e,...t})}({refreshIntervalTime:e,clientStorageGetter:r,clientStorageSetter:n,clientStorage:s,clientStorageType:o,autoRefreshToken:a,autoSignIn:c,start:d,...g}),this.storage=function Da(t){const e="subdomain"in t||"backendUrl"in t?sr(t,"storage"):t.storageUrl;if(!e)throw new Error("Please provide `subdomain` or `storageUrl`.");return new Ta({url:e,...t})}({adminSecret:u,...g}),this.functions=function Ia(t){const e="subdomain"in t||"backendUrl"in t?sr(t,"functions"):t.functionsUrl;if(!e)throw new Error("Please provide `subdomain` or `functionsUrl`.");return new Na({url:e,...t})}({adminSecret:u,...g}),this.graphql=function Ua(t){const e="subdomain"in t||"backendUrl"in t?sr(t,"graphql"):t.graphqlUrl;if(!e)throw new Error("Please provide `subdomain` or `graphqlUrl`.");return new Ca({url:e,...t})}({adminSecret:u,...g}),this.auth.client.onStart(()=>{const y=this.auth.getAccessToken();this.storage.setAccessToken(y),this.functions.setAccessToken(y),this.graphql.setAccessToken(y),this.auth.onAuthStateChanged((v,p)=>{"SIGNED_OUT"===v&&(this.storage.setAccessToken(void 0),this.functions.setAccessToken(void 0),this.graphql.setAccessToken(void 0))}),this.auth.onTokenChanged(v=>{const p=v?.accessToken;this.storage.setAccessToken(p),this.functions.setAccessToken(p),this.graphql.setAccessToken(p)})}),this._adminSecret=u,this.devTools=l}get adminSecret(){return this._adminSecret}set adminSecret(e){this._adminSecret=e,this.storage.setAdminSecret(e)}}({subdomain:"vmwbedddybyoxikbfriq",region:"ap-south-1"})},593:ar=>{ar.exports="object"==typeof self?self.FormData:window.FormData},5861:(ar,cr,ne)=>{"use strict";function je(R,ke,Me,Fe,ve,Be,_e){try{var b=R[Be](_e),ue=b.value}catch(N){return void Me(N)}b.done?ke(ue):Promise.resolve(ue).then(Fe,ve)}function it(R){return function(){var ke=this,Me=arguments;return new Promise(function(Fe,ve){var Be=R.apply(ke,Me);function _e(ue){je(Be,Fe,ve,_e,b,"next",ue)}function b(ue){je(Be,Fe,ve,_e,b,"throw",ue)}_e(void 0)})}}ne.d(cr,{Z:()=>it})}}]);