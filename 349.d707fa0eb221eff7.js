"use strict";(self.webpackChunkpurity_smart_services=self.webpackChunkpurity_smart_services||[]).push([[349],{4349:(le,y,a)=>{a.r(y),a.d(y,{UserLayoutModule:()=>se});var T=a(529),f=a(9299),m=a(6895),r=a(4006),x=a(7957),w=a(5938),g=a(9549),P=a(6308),k=a(8739),N=a(3626),v=a(5454),O=a(6902),M=a(726),F=a(9031),c=a(5861),d=a(5756),p=a(5840),e=a(4650);function I(i,l){if(1&i&&(e.TgZ(0,"tr")(1,"th",30)(2,"a",31),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td")(10,"span",32),e._UZ(11,"i"),e._uU(12),e.ALo(13,"titlecase"),e.qZA()(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA()()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(3),e.hij(" ",t.booking_id," "),e.xp6(2),e.hij(" ",t.service_detail.name," "),e.xp6(2),e.hij(" ",e.xi3(8,10,t.service_date,"dd/MM/yyyy")," "),e.xp6(4),e.Gre("bg-",o.getBookingStatusColor(t.booking_status.status_id),""),e.xp6(1),e.hij(" ",e.lcZ(13,13,t.booking_status.name)," "),e.xp6(3),e.hij(" ",t.otp," "),e.xp6(2),e.hij(" ",e.xi3(18,15,t.booking_date,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",(null==t.vendor_profile?null:t.vendor_profile.name)||"Not assigned"," ")}}let S=(()=>{class i{constructor(){}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.bookingsList=yield t.getBookingsList(d.q.auth.getUser().id),console.log(t.bookingsList),t.activeBookings=t.bookingsList.filter(o=>o.booking_status.status_id<5),t.completedBookings=t.bookingsList.filter(o=>5==o.booking_status.status_id)})()}getBookingsList(t){return(0,c.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.hy(t));return[...o.active_bookings]})()}getBookingStatusColor(t){let o;switch(t){case 1:o="blue";break;case 6:o="red";break;default:o="green"}return o}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-my-bookings"]],decls:59,vars:3,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col-xl-4","order-xl-2","mb-5","mb-xl-0"],[1,"card","card-profile","shadow"],[1,"row","justify-content-center"],[1,"card-header","text-center","border-0","pt-4","pb-0","pb-md-4"],[1,"d-flex","justify-content-between"],[1,"card-body","pb-4"],[1,"text-center"],[1,"text-green"],[1,"card","card-profile","shadow","mt-4"],[1,"text-blue"],[1,"col-xl-8","order-xl-1","mb-8"],[1,"card","bg-secondary","shadow"],[1,"card-body"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:void(0)"],[1,"badge","badge-dot","mr-4"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"My Bookings"),e.qZA()()()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),e._UZ(11,"div",10),e.TgZ(12,"div",11),e._UZ(13,"div",12),e.qZA(),e.TgZ(14,"div",13)(15,"div",14)(16,"h3"),e._uU(17,"Completed Bookings"),e.qZA(),e.TgZ(18,"h1",15),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",16),e._UZ(21,"div",10),e.TgZ(22,"div",11),e._UZ(23,"div",12),e.qZA(),e.TgZ(24,"div",13)(25,"div",14)(26,"h3"),e._uU(27,"Active Bookings"),e.qZA(),e.TgZ(28,"h1",17),e._uU(29),e.qZA()()()()(),e.TgZ(30,"div",18)(31,"div",19)(32,"div",20)(33,"div",7)(34,"div",21)(35,"div",22)(36,"div",23)(37,"h3",24),e._uU(38,"Your Bookings List"),e.qZA()(),e.TgZ(39,"div",25)(40,"table",26)(41,"thead",27)(42,"tr")(43,"th",28),e._uU(44,"Booking Id"),e.qZA(),e.TgZ(45,"th",28),e._uU(46,"Service Name"),e.qZA(),e.TgZ(47,"th",28),e._uU(48,"Service Date"),e.qZA(),e.TgZ(49,"th",28),e._uU(50,"Status"),e.qZA(),e.TgZ(51,"th",28),e._uU(52,"OTP"),e.qZA(),e.TgZ(53,"th",28),e._uU(54,"Booking Date"),e.qZA(),e.TgZ(55,"th",28),e._uU(56,"Vendor Name"),e.qZA()()(),e.TgZ(57,"tbody"),e.YNc(58,I,21,18,"tr",29),e.qZA()()()()()()()()()()()),2&t&&(e.xp6(19),e.Oqu(null==o.completedBookings?null:o.completedBookings.length),e.xp6(10),e.Oqu(null==o.activeBookings?null:o.activeBookings.length),e.xp6(29),e.Q6J("ngForOf",o.bookingsList))},dependencies:[m.sg,m.rS,m.uU],styles:[".mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 300px;\n}\n\n.card-body[_ngcontent-%COMP%] {\n  padding: 0px;\n}\n\n.table.align-items-center[_ngcontent-%COMP%] {\n  display: block;\n}\n\n.table-responsive[_ngcontent-%COMP%] {\n  border-radius: 0.375rem;\n}"]}),i})();var b=a(620),h=a(3238),_=a(4859),C=a(4144),Z=a(4385);function L(i,l){if(1&i&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let D=(()=>{class i{constructor(t,o){this.formBuilder=t,this.activeModal=o}ngOnInit(){this.localities=b.K,this.createAddNewAddressForm()}createAddNewAddressForm(){this.addNewAddressForm=this.formBuilder.group({address_name:["Home",[r.kI.required,r.kI.minLength(3)]],address:["",[r.kI.minLength(3)]],locality:["",[r.kI.required,r.kI.minLength(3)]],city:[{value:"Chennai",disabled:!0},[r.kI.required,r.kI.minLength(3)]],is_preferred_address:[!1,[r.kI.required]]})}close(t){this.activeModal.close(t)}onAddNewAddressFormSubmit(){console.log(this.addNewAddressForm.getRawValue()),this.activeModal.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(v.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-new-address-modal"]],decls:35,vars:3,consts:[[1,"modal-content","bg-secondary"],[1,"modal-header","bg-white"],["id","modal-title-default",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","px-3"],[1,"example-form",3,"formGroup"],[1,"row"],[1,"col-md-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","address_name"],[1,"col-lg-12"],["matInput","","formControlName","address"],[1,"col-lg-4"],["appearance","outline"],["formControlName","locality"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],[1,"modal-footer","bg-white"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"disabled","click"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Add New Address"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.close("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),e._uU(13,"Address Name"),e.qZA(),e._UZ(14,"input",10),e.qZA()(),e.TgZ(15,"div",11)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18,"Address"),e.qZA(),e._UZ(19,"input",12),e.qZA()()(),e.TgZ(20,"div",7)(21,"div",13)(22,"mat-form-field",14)(23,"mat-label"),e._uU(24,"Locality"),e.qZA(),e.TgZ(25,"mat-select",15),e.YNc(26,L,2,2,"mat-option",16),e.qZA()()(),e.TgZ(27,"div",13)(28,"mat-form-field",9)(29,"mat-label"),e._uU(30,"City"),e.qZA(),e._UZ(31,"input",17),e.qZA()()()()(),e.TgZ(32,"div",18)(33,"button",19),e.NdJ("click",function(){return o.onAddNewAddressFormSubmit()}),e._uU(34,"Submit"),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",o.addNewAddressForm),e.xp6(18),e.Q6J("ngForOf",o.localities),e.xp6(7),e.Q6J("disabled",o.addNewAddressForm.invalid))},dependencies:[m.sg,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.KE,g.hX,h.ey,_.lW,C.Nt,Z.gD],styles:[".mat-form-field[_ngcontent-%COMP%] {\n  width: 100%;\n}"]}),i})();var J=a(5226),U=a.n(J),A=a(5005);function B(i,l){if(1&i&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t.address_name),e.xp6(1),e.hij(" ",t.address_name," ")}}function j(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",29)(1,"mat-label"),e._uU(2,"Choose Address"),e.qZA(),e.TgZ(3,"mat-select",35),e.NdJ("selectionChange",function(n){e.CHM(t);const s=e.oxw();return e.KtG(s.selectAddress(n.value))}),e.YNc(4,B,2,2,"mat-option",31),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",null==t.userProfile?null:t.userProfile.user_addresses)}}function Y(i,l){1&i&&(e.TgZ(0,"mat-form-field",18)(1,"mat-label"),e._uU(2,"Address Name"),e.qZA(),e._UZ(3,"input",37),e.qZA())}function Q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",38)(1,"button",39),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.openAddNewAddressModal())}),e._uU(2,"Add new address"),e.qZA()()}}function V(i,l){if(1&i&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let H=(()=>{class i{constructor(t,o,n,s){this.formBuilder=t,this.modalService=o,this.sharedService=n,this.route=s,this.nhost=d.q}ngOnInit(){var t=this;this.route.queryParams.subscribe(function(){var o=(0,c.Z)(function*(n){t.createProfileForm(n?.id),t.localities=b.K,t.userProfile=yield t.getUserProfile(n?.id),t.userProfile&&t.setProfileFormValue(t.userProfile)});return function(n){return o.apply(this,arguments)}}())}getUserProfile(t){return(0,c.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.o0(t));return[...o.user_profiles][0]})()}createProfileForm(t){this.profileForm=this.formBuilder.group({user_id:[{value:t,disabled:!0},[r.kI.required]],name:[d.q.auth.getUser().displayName,[r.kI.required,r.kI.minLength(3)]],email:[d.q.auth.getUser().email,[r.kI.required,r.kI.minLength(3),r.kI.email]],phone:[{value:d.q.auth.getUser().phoneNumber,disabled:!0},[r.kI.required,r.kI.pattern("^[1-9][0-9]{5}$")]],address_id:["",[r.kI.required]],address_name:["",[r.kI.required,r.kI.minLength(3)]],address:["",[r.kI.required,r.kI.minLength(3)]],locality:["",[r.kI.required,r.kI.minLength(3)]],city:[{value:"Chennai",disabled:!0},[r.kI.required,r.kI.minLength(3)]],is_preferred_address:[!0,[r.kI.required]]})}setProfileFormValue(t){console.log(t);const o=t.user_addresses.filter(n=>!0===n.is_preferred_address)[0];this.profileForm.controls.name.setValue(t.name),this.profileForm.controls.email.setValue(t.email),this.profileForm.controls.phone.setValue(t.phone),this.profileForm.controls.address_id.setValue(o.id),this.profileForm.controls.address_name.setValue(o.address_name),this.profileForm.controls.address.setValue(o.address),this.profileForm.controls.locality.setValue(o.locality),this.profileForm.controls.city.setValue(o.city),this.profileForm.controls.is_preferred_address.setValue(o.is_preferred_address)}selectAddress(t){const o=this.userProfile.user_addresses.filter(n=>n.address_name===t)[0];this.profileForm.controls.address_id.setValue(o.id),this.profileForm.controls.address.setValue(o.address),this.profileForm.controls.locality.setValue(o.locality),this.profileForm.controls.city.setValue(o.city),this.profileForm.controls.is_preferred_address.setValue(o.is_preferred_address)}openAddNewAddressModal(){var t=this;this.modalService.open(D,{windowClass:"modal-mini",size:"md",centered:!0}).result.then(function(){var n=(0,c.Z)(function*(s){const u=d.q.auth.getUser().id;s.user_id=u,console.log(s),yield d.q.graphql.request(p.e$(s)),t.userProfile=yield t.getUserProfile(u),t.userProfile&&t.setProfileFormValue(t.userProfile)});return function(s){return n.apply(this,arguments)}}())}submitUpdateProfile(){var t=this;return(0,c.Z)(function*(){const o=t.profileForm.getRawValue();if(t.userProfile&&t.userProfile.is_profile_completed){const n={user_id:o.user_id,address_id:o.address_id,address_name:o.address_name,address:o.address,locality:o.locality,city:o.city,is_preferred_address:o.is_preferred_address},s={user_id:o.user_id,name:o.name,phone:o.phone,email:o.email};console.log(n),yield d.q.graphql.request(p.bG(s)),yield d.q.graphql.request(p.yE(n))}else{const{data:n}=yield d.q.graphql.request(p.m5(o));t.showNotification(n?"success":"error")}})()}showNotification(t){"success"==t?U().fire({icon:"success",title:"Success",text:"Your profile is updated successfully!"}).then(o=>{o.isConfirmed&&this.ngOnInit()}):U().fire({icon:"error",title:"Error",text:"Something went wrong! Try again."})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.qu),e.Y36(v.FF),e.Y36(A.F),e.Y36(f.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],decls:61,vars:7,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col-xl-8","order-xl-1","mb-8"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[3,"formGroup"],[1,"pl-lg-4"],[1,"col-lg-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","name"],["matInput","","formControlName","phone"],["matInput","","formControlName","email"],[1,"col-md-6"],["appearance","outline",4,"ngIf"],["class","example-full-width","appearance","outline",4,"ngIf"],["class","col-md-6 add-new-address",4,"ngIf"],[1,"col-lg-12"],["matInput","","formControlName","address"],[1,"col-lg-4"],["appearance","outline"],["formControlName","locality"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],[1,"card-footer"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"disabled","click"],["formControlName","address_name",3,"selectionChange"],[3,"value"],["matInput","","formControlName","address_name"],[1,"col-md-6","add-new-address"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Profile Details"),e.qZA()()()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"h3",13),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",14)(17,"form",15)(18,"div",16)(19,"div",7)(20,"div",17)(21,"mat-form-field",18)(22,"mat-label"),e._uU(23,"Username"),e.qZA(),e._UZ(24,"input",19),e.qZA()(),e.TgZ(25,"div",17)(26,"mat-form-field",18)(27,"mat-label"),e._uU(28,"Phone"),e.qZA(),e._UZ(29,"input",20),e.qZA()()(),e.TgZ(30,"div",7)(31,"div",17)(32,"mat-form-field",18)(33,"mat-label"),e._uU(34,"Email"),e.qZA(),e._UZ(35,"input",21),e.qZA()()(),e.TgZ(36,"div",7)(37,"div",22),e.YNc(38,j,5,1,"mat-form-field",23),e.YNc(39,Y,4,0,"mat-form-field",24),e.qZA(),e.YNc(40,Q,3,0,"div",25),e.TgZ(41,"div",26)(42,"mat-form-field",18)(43,"mat-label"),e._uU(44,"Address"),e.qZA(),e._UZ(45,"input",27),e.qZA()()(),e.TgZ(46,"div",7)(47,"div",28)(48,"mat-form-field",29)(49,"mat-label"),e._uU(50,"Locality"),e.qZA(),e.TgZ(51,"mat-select",30),e.YNc(52,V,2,2,"mat-option",31),e.qZA()()(),e.TgZ(53,"div",28)(54,"mat-form-field",18)(55,"mat-label"),e._uU(56,"City"),e.qZA(),e._UZ(57,"input",32),e.qZA()()()()()(),e.TgZ(58,"div",33)(59,"button",34),e.NdJ("click",function(){return o.submitUpdateProfile()}),e._uU(60,"Update Profile"),e.qZA()()()()()()),2&t&&(e.xp6(15),e.hij("",(null==o.userProfile?null:o.userProfile.user.displayName)||(null==o.userProfile?null:o.userProfile.name),"'s account"),e.xp6(2),e.Q6J("formGroup",o.profileForm),e.xp6(21),e.Q6J("ngIf",o.userProfile),e.xp6(1),e.Q6J("ngIf",!o.userProfile),e.xp6(1),e.Q6J("ngIf",o.userProfile),e.xp6(12),e.Q6J("ngForOf",o.localities),e.xp6(7),e.Q6J("disabled",!o.profileForm.dirty&&o.profileForm.invalid))},dependencies:[m.sg,m.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,g.KE,g.hX,h.ey,_.lW,C.Nt,Z.gD],styles:[".card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 180px;\n}\n\n.mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 300px;\n}\n\n.mat-form-field[_ngcontent-%COMP%] {\n  width: 100%;\n}\n\n.add-new-address[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n}\n\n.add-new-address[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  height: 52px;\n  margin: 0.25em 0;\n}"]}),i})();var $=a(1100),z=a(3162);let q=(()=>{class i{constructor(){}ngOnInit(){}getRoundOffValue(t){return Math.ceil(t)}getDocumentUrl(t){return d.q.storage.getPublicUrl({fileId:`${t}`})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-service-card-widget"]],inputs:{service:"service"},decls:12,vars:5,consts:[[1,"card","card-stats","mb-xl-0"],[1,"card-body"],[1,"row"],[1,"col"],[3,"src","alt"],[1,"col","pt-3"],[1,"h2","font-weight-bold","mb-0",3,"title"],[1,"card-title","text-muted","mb-0"],[1,"price"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"h5",7)(9,"span",8),e._uU(10),e.qZA(),e._uU(11," *Onwards"),e.qZA()()()()()),2&t&&(e.xp6(4),e.s9C("src",o.getDocumentUrl(o.service.image_id),e.LSH),e.s9C("alt",o.service.name),e.xp6(2),e.s9C("title",o.service.name),e.xp6(1),e.Oqu(o.service.name),e.xp6(3),e.hij("\u20b9",o.service.price,""))},styles:[".card-body[_ngcontent-%COMP%] {\n  padding: 0.75rem 0.75rem !important;\n  background-color: #f8f9fe !important;\n}\n.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%] {\n  flex-direction: column;\n}\n.card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 100%;\n  border-radius: 0.375rem;\n  height: 200px;\n  object-fit: cover;\n}\n.card-body[_ngcontent-%COMP%]   span.h2[_ngcontent-%COMP%] {\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.card-body[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}\n.card-body[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%] {\n  color: #DD2600;\n  font-weight: bold;\n  font-size: 1.2rem;\n}"]}),i})();function R(i,l){1&i&&e._UZ(0,"hr",31)}function X(i,l){1&i&&(e.TgZ(0,"h6",32),e._uU(1,"Contact information"),e.qZA())}function E(i,l){if(1&i&&(e.TgZ(0,"div",17)(1,"div",7)(2,"div",33)(3,"div",19)(4,"label",34),e._uU(5,"Address"),e.qZA(),e._UZ(6,"input",35),e.qZA()()(),e.TgZ(7,"div",7)(8,"div",36)(9,"div",19)(10,"label",37),e._uU(11,"City"),e.qZA(),e._UZ(12,"input",38),e.qZA()(),e.TgZ(13,"div",36)(14,"div",19)(15,"label",39),e._uU(16,"Locality"),e.qZA(),e._UZ(17,"input",40),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("value",null==t.user?null:t.user.address),e.xp6(6),e.Q6J("value",null==t.user?null:t.user.city),e.xp6(5),e.Q6J("value",null==t.user?null:t.user.locality)}}let G=(()=>{class i{constructor(t,o,n){this.route=t,this.router=o,this.modalService=n,this.serviceDetail=this.router.getCurrentNavigation().extras.state}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.route.queryParams.subscribe(function(){var o=(0,c.Z)(function*(n){if(n.prop){const{data:s}=yield d.q.graphql.request((0,p.M0)(n.prop));s&&(t.user={displayName:s.user.displayName,avatarUrl:s.user.avatarUrl,address:s.vendor_profiles[0].address,city:s.vendor_profiles[0].city,locality:s.vendor_profiles[0].locality,email:s.vendor_profiles[0].email,phoneNumber:s.vendor_profiles[0].phone,roles:"Vendor"})}else if(n.User){const{data:s}=yield d.q.graphql.request((0,p.o0)(n.User));s&&(t.user={displayName:s.user_profiles[0].user.displayName,avatarUrl:s.user_profiles[0].user.avatarUrl,address:s.user_profiles[0]?.user_addresses[0]?.address,city:s.user_profiles[0]?.user_addresses[0]?.city,locality:s.user_profiles[0]?.user_addresses[0]?.locality,email:s.user_profiles[0].user.email,phoneNumber:s.user_profiles[0].phone,roles:"User"})}else t.user=d.q.auth.getUser()});return function(n){return o.apply(this,arguments)}}()),console.log(t.serviceDetail),t.userReviews=yield t.getUserReviews(t.serviceDetail.sid),console.log(t.userReviews)})()}formatJSON(t){let o;return o.displayName=t.user.displayName,o.avatarUrl=t.user.avatarUrl,o.address=t.vendor_profiles[0].address,o.city=t.vendor_profiles[0].city,o.locality=t.vendor_profiles[0].locality,o.email=t.vendor_profiles[0].email,o.phone=t.vendor_profiles[0].phone,o}bookNow(){d.q.auth.getUser()?this.openBookingModal():this.openLoginModal()}openLoginModal(){this.modalService.open(z.X,{windowClass:"modal-mini",size:"sm",centered:!0}).result.then(o=>{console.log(`Closed with: ${o}`)})}openBookingModal(){const t=this.modalService.open($.A,{windowClass:"modal-mini",size:"md",centered:!0});t.result.then(o=>{console.log(`Closed with: ${o}`)}),t.componentInstance.serviceDetail=this.serviceDetail}getUserReviews(t){return(0,c.Z)(function*(){const{data:o}=yield d.q.graphql.request((0,p.oR)(t));return[...o.user_reviews]})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.gz),e.Y36(f.F0),e.Y36(v.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-service-details"]],decls:61,vars:12,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white","mt-sm-5","mt-lg-0"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col-xl-4","order-xl-2","mb-5","mb-xl-0"],[3,"service"],[1,"col-xl-8","order-xl-1","mb-8"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[1,"pl-lg-4"],[1,"col-lg-6"],[1,"form-group"],["for","input-username",1,"form-control-label"],[1,"text-sm"],["for","input-email",1,"form-control-label"],["for","input-first-name",1,"form-control-label"],["for","input-last-name",1,"form-control-label"],[1,"col-lg-12"],["class","my-4",4,"ngIf"],["class","heading-small text-muted mb-4",4,"ngIf"],["class","pl-lg-4",4,"ngIf"],[1,"card-footer"],["mat-flat-button","","color","primary",3,"click"],[1,"my-4"],[1,"heading-small","text-muted","mb-4"],[1,"col-md-12"],["for","input-address",1,"form-control-label"],["id","input-address","type","text","disabled","",1,"form-control","form-control-alternative",3,"value"],[1,"col-lg-4"],["for","input-city",1,"form-control-label"],["type","text","id","input-city","disabled","",1,"form-control","form-control-alternative",3,"value"],["for","input-locality",1,"form-control-label"],["type","text","id","input-country","disabled","",1,"form-control","form-control-alternative",3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6),e.ALo(7,"uppercase"),e.qZA()()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8),e._UZ(11,"app-service-card-widget",9),e.qZA(),e.TgZ(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"h3",15),e._uU(18,"Service Details"),e.qZA()()()(),e.TgZ(19,"div",16)(20,"form")(21,"div",17)(22,"div",7)(23,"div",18)(24,"div",19)(25,"label",20),e._uU(26,"Service Name"),e.qZA(),e.TgZ(27,"p",21),e._uU(28),e.qZA()()(),e.TgZ(29,"div",18)(30,"div",19)(31,"label",22),e._uU(32,"Duration"),e.qZA(),e.TgZ(33,"p",21),e._uU(34),e.qZA()()()(),e.TgZ(35,"div",7)(36,"div",18)(37,"div",19)(38,"label",23),e._uU(39,"Price"),e.qZA(),e.TgZ(40,"p",21),e._uU(41),e.qZA()()(),e.TgZ(42,"div",18)(43,"div",19)(44,"label",24),e._uU(45,"Total Reviews"),e.qZA(),e.TgZ(46,"p",21),e._uU(47),e.qZA()()()(),e.TgZ(48,"div",7)(49,"div",25)(50,"div",19)(51,"label",23),e._uU(52,"Description"),e.qZA(),e.TgZ(53,"p",21),e._uU(54),e.qZA()()()()(),e.YNc(55,R,1,0,"hr",26),e.YNc(56,X,2,0,"h6",27),e.YNc(57,E,18,3,"div",28),e.qZA()(),e.TgZ(58,"div",29)(59,"button",30),e.NdJ("click",function(){return o.bookNow()}),e._uU(60,"Book Now"),e.qZA()()()()()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,10,null==o.serviceDetail?null:o.serviceDetail.name)),e.xp6(5),e.Q6J("service",o.serviceDetail),e.xp6(17),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.name," "),e.xp6(6),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.duration," hours "),e.xp6(7),e.hij(" \u20b9 ",null==o.serviceDetail?null:o.serviceDetail.price," Onwards** "),e.xp6(6),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.reviews_count," "),e.xp6(7),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.description," "),e.xp6(1),e.Q6J("ngIf",null==o.user?null:o.user.address),e.xp6(1),e.Q6J("ngIf",null==o.user?null:o.user.address),e.xp6(1),e.Q6J("ngIf",null==o.user?null:o.user.address))},dependencies:[m.O5,q,r._Y,r.JL,r.F,_.lW,m.gd],styles:[".card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 180px;\n}\n\n.mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 300px;\n}"]}),i})();var K=a(8675),W=a(4004);function ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.getServiceDetails(s))}),e._UZ(1,"img",33),e.TgZ(2,"span"),e._uU(3),e.qZA()()}if(2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.s9C("src",o.getDocumentUrl(t.image_id),e.LSH),e.s9C("alt",t.name),e.xp6(2),e.Oqu(t.name)}}function te(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit,u=e.oxw(2);return e.KtG(u.getServiceDetails(s))}),e._UZ(1,"app-service-card-widget",38),e.qZA()}if(2&i){const t=l.$implicit;e.xp6(1),e.Q6J("service",t)}}function oe(i,l){if(1&i&&(e.TgZ(0,"div",34)(1,"div",14)(2,"h2",15),e._uU(3),e.qZA(),e.TgZ(4,"div",35),e.YNc(5,te,2,1,"div",36),e.qZA()()()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("ngForOf",o.getServicesByCategory(t.id,o.servicesList))}}const ie=[{path:"home",component:(()=>{class i{constructor(t,o){this.router=t,this.sharedService=o,this.myControl=new r.NI(""),this.options=[]}ngOnInit(){var t=this;this.sharedService.userData.subscribe(function(){var o=(0,c.Z)(function*(n){if(n){if(0==(yield t.isProfileCompleted(n.id)).length)return void t.router.navigateByUrl(`user/profile?id=${d.q.auth.getUser().id}`);t.getServices()}else t.getServices()});return function(n){return o.apply(this,arguments)}}())}getServices(){var t=this;return(0,c.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.ew);o&&(t.servicesList=[...o.service_details],console.log("servicesList :",t.servicesList),t.options=t.servicesList,t.filteredOptions=t.myControl.valueChanges.pipe((0,K.O)(""),(0,W.U)(s=>s.length>=2?t._filter(s||""):[])),t.getServiceCategories(t.servicesList))})()}getServiceCategories(t){console.log(t);const o={};t.forEach(n=>{const{id:s,name:u}=n.service_category;o[s]||(o[s]={id:s,name:u})}),console.log("unique category :",Object.values(o)),this.serviceCategories=Object.values(o)}getServicesByCategory(t,o){return o.filter(n=>n.service_category.id===t)}getServiceDetails(t){this.router.navigate([`user/service-details/${t.sid}`],{state:t})}_filter(t){return this.options.filter(o=>o.name.toLowerCase().includes(t.toLowerCase()))}isProfileCompleted(t){return(0,c.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.XL(t));return[...o.user_profiles]})()}getDocumentUrl(t){return d.q.storage.getPublicUrl({fileId:`${t}`})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.F0),e.Y36(A.F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-home"]],decls:56,vars:2,consts:[[1,"user-home-wrapper"],[1,"header","pb-8","pt-8","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-12","text-center"],[1,"display-2","text-white"],[1,"text-white"],[1,"header","pb-8"],[1,"container-fluid"],[1,"mt--7"],[1,"card","shadow"],[1,"card-header","bg-transparent"],[1,"row","align-items-center"],[1,"col"],[1,"mb-0"],[1,"card-body"],[3,"click",4,"ngFor","ngForOf"],[1,"header-body","pt-5"],[1,"card","shadow","bg-secondary"],[1,"card-header","bg-white"],[1,"text-uppercase","text-muted","ls-1","mb-1"],["class","row category",4,"ngFor","ngForOf"],[1,"showcase"],[1,"col-lg-6"],["src","assets/img/services/app.jpg","alt",""],[1,"lead","display-4","mb-4","px-md-10","px-lg-0","h1"],[1,"mb-7","px-md-10","px-lg-0","pe-xxl-15"],[1,"d-flex","justify-content-center","justify-content-lg-start"],[1,"me-2"],["href","https://play.google.com/store/apps/details?id=com.alberoraven.puritysmartservices",1,"me-2"],["alt","Hometriangle android app","src","assets/img/icons/button-google-play.svg","onerror","this.onerror=null;pagespeed.lazyLoadImages.loadIfVisibleAndMaybeBeacon(this);",1,"h-11","rounded-2"],[3,"click"],[3,"src","alt"],[1,"row","category"],[1,"row"],["class","user-home-cards col-xl-3 col-lg-4 col-md-4 pb-4",3,"click",4,"ngFor","ngForOf"],[1,"user-home-cards","col-xl-3","col-lg-4","col-md-4","pb-4",3,"click"],[3,"service"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"span",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),e._uU(7,"Purity Smart Services"),e.qZA(),e.TgZ(8,"h3",7),e._uU(9,"Your one-stop solution for all your home maintenance and repair needs!"),e.qZA()()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"h2",15),e._uU(18,"What service do you need?"),e.qZA()()()(),e.TgZ(19,"div",16)(20,"mat-form-field")(21,"mat-label"),e._uU(22,"Select a service"),e.qZA(),e.TgZ(23,"mat-select"),e.YNc(24,ee,4,3,"mat-option",17),e.qZA()()()()(),e.TgZ(25,"div",18)(26,"div",19)(27,"div",20)(28,"div",13)(29,"div",14)(30,"h6",21),e._uU(31,"Choose your service"),e.qZA(),e.TgZ(32,"h2",15),e._uU(33,"All Services"),e.qZA()()()(),e.TgZ(34,"div",16),e.YNc(35,oe,6,2,"div",22),e.qZA()()(),e.TgZ(36,"div",18)(37,"div",11)(38,"div",12)(39,"div",13)(40,"div",14)(41,"h2",15),e._uU(42,"Need app?"),e.qZA()()()(),e.TgZ(43,"div",16)(44,"div",23)(45,"div",24),e._UZ(46,"img",25),e.qZA(),e.TgZ(47,"div",24)(48,"h3",26),e._uU(49,"The one app for all your home services"),e.qZA(),e.TgZ(50,"p",27),e._uU(51,"Pick your professional services from a wide range, review their ratings and book your service, all in a few taps."),e.qZA(),e.TgZ(52,"div",28)(53,"span",29)(54,"a",30),e._UZ(55,"img",31),e.qZA()()()()()()()()()()()),2&t&&(e.xp6(24),e.Q6J("ngForOf",o.servicesList),e.xp6(11),e.Q6J("ngForOf",o.serviceCategories))},dependencies:[m.sg,q,g.KE,g.hX,h.ey,Z.gD],styles:[".mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 400px;\n}\n\n.display-2[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n.navbar-search-light[_ngcontent-%COMP%]   .focused[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] {\n  border-color: #f5365c !important;\n}\n\nmat-form-field[_ngcontent-%COMP%] {\n  width: 100%;\n}\n\nmat-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  padding-left: 10px;\n}\n\nmat-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 55px;\n}\n\n.category[_ngcontent-%COMP%] {\n  padding-bottom: 1rem;\n}\n\n.showcase[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  background-color: #ffffff;\n}\n\n.showcase[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 100%;\n}"]}),i})()},{path:"profile",component:H},{path:"my-bookings",component:S},{path:"service-details/:id",component:G},{path:"logout",component:F.t},{path:"**",redirectTo:"home"}];var re=a(843),ne=a(9258);let se=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[m.uU],imports:[m.ez,ne.K,r.u5,r.UX,T.JF,M.g,v.IJ,P.JX,O.Iq,N.p0,w.Is,g.lN,x.Bb,r.UX,re.p,k.TU,f.Bz.forChild(ie),g.lN]}),i})()}}]);