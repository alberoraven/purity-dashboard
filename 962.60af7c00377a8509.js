"use strict";(self.webpackChunkpurity_smart_services=self.webpackChunkpurity_smart_services||[]).push([[962],{2962:(Ue,q,a)=>{a.r(q),a.d(q,{UserLayoutModule:()=>qe});var x=a(529),f=a(9299),c=a(6895),n=a(4006),b=a(7957),w=a(5938),g=a(9549),k=a(6308),M=a(8739),P=a(3626),_=a(5454),N=a(6902),O=a(726),F=a(9031),m=a(5861),d=a(5756),p=a(5840),e=a(4650);function I(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"th",30)(2,"a",31),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td")(10,"span",32),e._UZ(11,"i"),e._uU(12),e.ALo(13,"titlecase"),e.qZA()(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"date"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA()()),2&i){const t=s.$implicit,o=e.oxw();e.xp6(3),e.hij(" ",t.booking_id," "),e.xp6(2),e.hij(" ",t.service_detail.name," "),e.xp6(2),e.hij(" ",e.xi3(8,10,t.service_date,"dd/MM/yyyy")," "),e.xp6(4),e.Gre("bg-",o.getBookingStatusColor(t.booking_status.status_id),""),e.xp6(1),e.hij(" ",e.lcZ(13,13,t.booking_status.name)," "),e.xp6(3),e.hij(" ",t.otp," "),e.xp6(2),e.hij(" ",e.xi3(18,15,t.booking_date,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",(null==t.vendor_profile?null:t.vendor_profile.name)||"Not assigned"," ")}}let J=(()=>{class i{constructor(){}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.bookingsList=yield t.getBookingsList(d.q.auth.getUser().id),console.log(t.bookingsList),t.activeBookings=t.bookingsList.filter(o=>o.booking_status.status_id<5),t.completedBookings=t.bookingsList.filter(o=>5==o.booking_status.status_id)})()}getBookingsList(t){return(0,m.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.hy(t));return[...o.active_bookings]})()}getBookingStatusColor(t){let o;switch(t){case 1:o="blue";break;case 6:o="red";break;default:o="green"}return o}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-my-bookings"]],decls:59,vars:3,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col-xl-4","order-xl-2","mb-5","mb-xl-0"],[1,"card","card-profile","shadow"],[1,"row","justify-content-center"],[1,"card-header","text-center","border-0","pt-4","pb-0","pb-md-4"],[1,"d-flex","justify-content-between"],[1,"card-body","pb-4"],[1,"text-center"],[1,"text-green"],[1,"card","card-profile","shadow","mt-4"],[1,"text-blue"],[1,"col-xl-8","order-xl-1","mb-8"],[1,"card","bg-secondary","shadow"],[1,"card-body"],[1,"col"],[1,"card","shadow"],[1,"card-header","border-0"],[1,"mb-0"],[1,"table-responsive"],[1,"table","align-items-center","table-flush"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["href","javascript:void(0)"],[1,"badge","badge-dot","mr-4"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"My Bookings"),e.qZA()()()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),e._UZ(11,"div",10),e.TgZ(12,"div",11),e._UZ(13,"div",12),e.qZA(),e.TgZ(14,"div",13)(15,"div",14)(16,"h3"),e._uU(17,"Completed Bookings"),e.qZA(),e.TgZ(18,"h1",15),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",16),e._UZ(21,"div",10),e.TgZ(22,"div",11),e._UZ(23,"div",12),e.qZA(),e.TgZ(24,"div",13)(25,"div",14)(26,"h3"),e._uU(27,"Active Bookings"),e.qZA(),e.TgZ(28,"h1",17),e._uU(29),e.qZA()()()()(),e.TgZ(30,"div",18)(31,"div",19)(32,"div",20)(33,"div",7)(34,"div",21)(35,"div",22)(36,"div",23)(37,"h3",24),e._uU(38,"Your Bookings List"),e.qZA()(),e.TgZ(39,"div",25)(40,"table",26)(41,"thead",27)(42,"tr")(43,"th",28),e._uU(44,"Booking Id"),e.qZA(),e.TgZ(45,"th",28),e._uU(46,"Service Name"),e.qZA(),e.TgZ(47,"th",28),e._uU(48,"Service Date"),e.qZA(),e.TgZ(49,"th",28),e._uU(50,"Status"),e.qZA(),e.TgZ(51,"th",28),e._uU(52,"OTP"),e.qZA(),e.TgZ(53,"th",28),e._uU(54,"Booking Date"),e.qZA(),e.TgZ(55,"th",28),e._uU(56,"Vendor Name"),e.qZA()()(),e.TgZ(57,"tbody"),e.YNc(58,I,21,18,"tr",29),e.qZA()()()()()()()()()()()),2&t&&(e.xp6(19),e.Oqu(null==o.completedBookings?null:o.completedBookings.length),e.xp6(10),e.Oqu(null==o.activeBookings?null:o.activeBookings.length),e.xp6(29),e.Q6J("ngForOf",o.bookingsList))},dependencies:[c.sg,c.rS,c.uU],styles:[".mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 300px;\n}\n\n.card-body[_ngcontent-%COMP%] {\n  padding: 0px;\n}\n\n.table.align-items-center[_ngcontent-%COMP%] {\n  display: block;\n}\n\n.table-responsive[_ngcontent-%COMP%] {\n  border-radius: 0.375rem;\n}"]}),i})();var A=a(620),v=a(3238),h=a(4859),Z=a(4144),C=a(4385);function S(i,s){if(1&i&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let B=(()=>{class i{constructor(t,o){this.formBuilder=t,this.activeModal=o}ngOnInit(){this.localities=A.K,this.createAddNewAddressForm()}createAddNewAddressForm(){this.addNewAddressForm=this.formBuilder.group({address_name:["",[n.kI.required,n.kI.minLength(3)]],address:["",[n.kI.required,n.kI.minLength(3)]],locality:["",[n.kI.required,n.kI.minLength(3)]],city:[{value:"Chennai",disabled:!0},[n.kI.required,n.kI.minLength(3)]],is_preferred_address:[!1,[n.kI.required]]})}close(t){this.activeModal.close(t)}onAddNewAddressFormSubmit(){console.log(this.addNewAddressForm.getRawValue()),this.activeModal.close(this.addNewAddressForm.getRawValue())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.qu),e.Y36(_.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-new-address-modal"]],decls:35,vars:3,consts:[[1,"modal-content","bg-secondary"],[1,"modal-header","bg-white"],["id","modal-title-default",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","px-3"],[1,"example-form",3,"formGroup"],[1,"row"],[1,"col-md-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","address_name"],[1,"col-lg-12"],["matInput","","formControlName","address"],[1,"col-lg-4"],["appearance","outline"],["formControlName","locality"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],[1,"modal-footer","bg-white"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"disabled","click"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Add New Address"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.close("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label"),e._uU(13,"Address Name"),e.qZA(),e._UZ(14,"input",10),e.qZA()(),e.TgZ(15,"div",11)(16,"mat-form-field",9)(17,"mat-label"),e._uU(18,"Address"),e.qZA(),e._UZ(19,"input",12),e.qZA()()(),e.TgZ(20,"div",7)(21,"div",13)(22,"mat-form-field",14)(23,"mat-label"),e._uU(24,"Locality"),e.qZA(),e.TgZ(25,"mat-select",15),e.YNc(26,S,2,2,"mat-option",16),e.qZA()()(),e.TgZ(27,"div",13)(28,"mat-form-field",9)(29,"mat-label"),e._uU(30,"City"),e.qZA(),e._UZ(31,"input",17),e.qZA()()()()(),e.TgZ(32,"div",18)(33,"button",19),e.NdJ("click",function(){return o.onAddNewAddressFormSubmit()}),e._uU(34,"Submit"),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("formGroup",o.addNewAddressForm),e.xp6(18),e.Q6J("ngForOf",o.localities),e.xp6(7),e.Q6J("disabled",o.addNewAddressForm.invalid))},dependencies:[c.sg,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,g.KE,g.hX,v.ey,h.lW,Z.Nt,C.gD],styles:[".mat-form-field[_ngcontent-%COMP%] {\n  width: 100%;\n}"]}),i})();var L=a(5226),y=a.n(L),U=a(5005);function D(i,s){if(1&i&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.address_name),e.xp6(1),e.hij(" ",t.address_name," ")}}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",42)(1,"mat-label"),e._uU(2,"Choose Address"),e.qZA(),e.TgZ(3,"mat-select",48),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.selectAddress(r.value))}),e.YNc(4,D,2,2,"mat-option",44),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",null==t.userProfile?null:t.userProfile.user_addresses)}}function Q(i,s){1&i&&(e.TgZ(0,"mat-form-field",30)(1,"mat-label"),e._uU(2,"Address Name"),e.qZA(),e._UZ(3,"input",50),e.qZA())}function j(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",51)(1,"button",52),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.openAddNewAddressModal())}),e._uU(2,"Add new address"),e.qZA()()}}function R(i,s){if(1&i&&(e.TgZ(0,"mat-option",49),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let V=(()=>{class i{constructor(t,o,r,l){this.formBuilder=t,this.modalService=o,this.sharedService=r,this.route=l,this.nhost=d.q}ngOnInit(){var t=this;this.route.queryParams.subscribe(function(){var o=(0,m.Z)(function*(r){t.createProfileForm(r?.id),t.localities=A.K,t.userProfile=yield t.getUserProfile(r?.id),t.userProfile&&t.setProfileFormValue(t.userProfile)});return function(r){return o.apply(this,arguments)}}())}getUserProfile(t){return(0,m.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.o0(t));return[...o.user_profiles][0]})()}createProfileForm(t){this.profileForm=this.formBuilder.group({user_id:[{value:t,disabled:!0},[n.kI.required]],name:[d.q.auth.getUser().displayName,[n.kI.required,n.kI.minLength(3)]],email:[d.q.auth.getUser().email,[n.kI.required,n.kI.minLength(3),n.kI.email]],phone:[{value:d.q.auth.getUser().phoneNumber,disabled:!0},[n.kI.required,n.kI.pattern("^[1-9][0-9]{5}$")]],address_id:["",[n.kI.required]],address_name:["",[n.kI.required,n.kI.minLength(3)]],address:["",[n.kI.required,n.kI.minLength(3)]],locality:["",[n.kI.required,n.kI.minLength(3)]],city:[{value:"Chennai",disabled:!0},[n.kI.required,n.kI.minLength(3)]],is_preferred_address:[!0,[n.kI.required]]})}setProfileFormValue(t){console.log(t);const o=t.user_addresses.filter(r=>!0===r.is_preferred_address)[0];this.profileForm.controls.name.setValue(t.name),this.profileForm.controls.email.setValue(t.email),this.profileForm.controls.phone.setValue(t.phone),this.profileForm.controls.address_id.setValue(o.id),this.profileForm.controls.address_name.setValue(o.address_name),this.profileForm.controls.address.setValue(o.address),this.profileForm.controls.locality.setValue(o.locality),this.profileForm.controls.city.setValue(o.city),this.profileForm.controls.is_preferred_address.setValue(o.is_preferred_address)}selectAddress(t){const o=this.userProfile.user_addresses.filter(r=>r.address_name===t)[0];this.profileForm.controls.address_id.setValue(o.id),this.profileForm.controls.address.setValue(o.address),this.profileForm.controls.locality.setValue(o.locality),this.profileForm.controls.city.setValue(o.city),this.profileForm.controls.is_preferred_address.setValue(o.is_preferred_address)}openAddNewAddressModal(){var t=this;this.modalService.open(B,{windowClass:"modal-mini",size:"md",centered:!0}).result.then(function(){var r=(0,m.Z)(function*(l){const u=d.q.auth.getUser().id;l.user_id=u,console.log(l),yield d.q.graphql.request(p.e$(l)),t.userProfile=yield t.getUserProfile(u),t.userProfile&&t.setProfileFormValue(t.userProfile)});return function(l){return r.apply(this,arguments)}}())}submitUpdateProfile(){var t=this;return(0,m.Z)(function*(){const o=t.profileForm.getRawValue();if(t.userProfile&&t.userProfile.is_profile_completed){const r={user_id:o.user_id,address_id:o.address_id,address_name:o.address_name,address:o.address,locality:o.locality,city:o.city,is_preferred_address:o.is_preferred_address},l={user_id:o.user_id,name:o.name,phone:o.phone,email:o.email};console.log(r),yield d.q.graphql.request(p.bG(l)),yield d.q.graphql.request(p.yE(r))}else{const{data:r}=yield d.q.graphql.request(p.m5(o));t.showNotification(r?"success":"error")}})()}showNotification(t){"success"==t?y().fire({icon:"success",title:"Success",text:"Your profile is updated successfully!"}).then(o=>{o.isConfirmed&&this.ngOnInit()}):y().fire({icon:"error",title:"Error",text:"Something went wrong! Try again."})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.qu),e.Y36(_.FF),e.Y36(U.F),e.Y36(f.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],decls:80,vars:8,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col-xl-4","order-xl-2","mb-5","mb-xl-0"],[1,"card","card-profile","shadow"],[1,"row","justify-content-center"],[1,"col-lg-3","order-lg-2"],[1,"card-profile-image"],["href","javascript:void(0)"],["src","assets/img/theme/avatar.png",1,"rounded-circle"],[1,"card-header","text-center","border-0","pt-8","pt-md-4","pb-0","pb-md-4"],[1,"d-flex","justify-content-between"],[1,"card-body","pt-8","pt-md-8"],[1,"text-center"],[1,"col-xl-8","order-xl-1","mb-8"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[3,"formGroup"],[1,"heading-small","text-muted","mb-4"],[1,"pl-lg-4"],[1,"col-lg-6"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","name"],["matInput","","formControlName","phone"],["matInput","","formControlName","email"],[1,"my-4"],[1,"col-md-6"],["appearance","outline",4,"ngIf"],["class","example-full-width","appearance","outline",4,"ngIf"],["class","col-md-6 add-new-address",4,"ngIf"],[1,"col-lg-12"],["matInput","","formControlName","address"],[1,"col-lg-4"],["appearance","outline"],["formControlName","locality"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","city"],[1,"card-footer"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"disabled","click"],["formControlName","address_name",3,"selectionChange"],[3,"value"],["matInput","","formControlName","address_name"],[1,"col-md-6","add-new-address"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6,"Profile Details"),e.qZA()()()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"a",13),e._UZ(15,"img",14),e.qZA()()()(),e.TgZ(16,"div",15),e._UZ(17,"div",16),e.qZA(),e.TgZ(18,"div",17)(19,"div",18)(20,"h3"),e._uU(21),e.qZA()()()()(),e.TgZ(22,"div",19)(23,"div",20)(24,"div",21)(25,"div",22)(26,"div",23)(27,"h3",24),e._uU(28),e.qZA()()()(),e.TgZ(29,"div",25)(30,"form",26)(31,"h6",27),e._uU(32,"User information"),e.qZA(),e.TgZ(33,"div",28)(34,"div",7)(35,"div",29)(36,"mat-form-field",30)(37,"mat-label"),e._uU(38,"Username"),e.qZA(),e._UZ(39,"input",31),e.qZA()(),e.TgZ(40,"div",29)(41,"mat-form-field",30)(42,"mat-label"),e._uU(43,"Phone"),e.qZA(),e._UZ(44,"input",32),e.qZA()()(),e.TgZ(45,"div",7)(46,"div",29)(47,"mat-form-field",30)(48,"mat-label"),e._uU(49,"Email"),e.qZA(),e._UZ(50,"input",33),e.qZA()()()(),e._UZ(51,"hr",34),e.TgZ(52,"h6",27),e._uU(53,"Address information"),e.qZA(),e.TgZ(54,"div",28)(55,"div",7)(56,"div",35),e.YNc(57,Y,5,1,"mat-form-field",36),e.YNc(58,Q,4,0,"mat-form-field",37),e.qZA(),e.YNc(59,j,3,0,"div",38),e.TgZ(60,"div",39)(61,"mat-form-field",30)(62,"mat-label"),e._uU(63,"Address"),e.qZA(),e._UZ(64,"input",40),e.qZA()()(),e.TgZ(65,"div",7)(66,"div",41)(67,"mat-form-field",42)(68,"mat-label"),e._uU(69,"Locality"),e.qZA(),e.TgZ(70,"mat-select",43),e.YNc(71,R,2,2,"mat-option",44),e.qZA()()(),e.TgZ(72,"div",41)(73,"mat-form-field",30)(74,"mat-label"),e._uU(75,"City"),e.qZA(),e._UZ(76,"input",45),e.qZA()()()()()(),e.TgZ(77,"div",46)(78,"button",47),e.NdJ("click",function(){return o.submitUpdateProfile()}),e._uU(79,"Update Profile"),e.qZA()()()()()()),2&t&&(e.xp6(21),e.hij(" ",null==o.userProfile?null:o.userProfile.user.displayName," "),e.xp6(7),e.hij("",(null==o.userProfile?null:o.userProfile.user.displayName)||(null==o.userProfile?null:o.userProfile.name),"'s account"),e.xp6(2),e.Q6J("formGroup",o.profileForm),e.xp6(27),e.Q6J("ngIf",o.userProfile),e.xp6(1),e.Q6J("ngIf",!o.userProfile),e.xp6(1),e.Q6J("ngIf",o.userProfile),e.xp6(12),e.Q6J("ngForOf",o.localities),e.xp6(7),e.Q6J("disabled",!o.profileForm.dirty&&o.profileForm.invalid))},dependencies:[c.sg,c.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,g.KE,g.hX,v.ey,h.lW,Z.Nt,C.gD],styles:[".card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 180px;\n}\n\n.mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 300px;\n}\n\n.mat-form-field[_ngcontent-%COMP%] {\n  width: 100%;\n}\n\n.add-new-address[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n}\n\n.add-new-address[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  height: 52px;\n  margin: 0.25em 0;\n}"]}),i})();var H=a(3162),z=a(3546),G=a(9602);function K(i,s){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.address_name),e.xp6(1),e.hij(" ",t.address_name," ")}}function W(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"form",17)(2,"div",0)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Choose Address"),e.qZA(),e.TgZ(7,"mat-select",20),e.NdJ("selectionChange",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.updateAddress(r.value))}),e.YNc(8,K,2,2,"mat-option",21),e.qZA()()()(),e.TgZ(9,"div",0)(10,"div",22)(11,"mat-form-field",23)(12,"mat-label"),e._uU(13,"Address"),e.qZA(),e._UZ(14,"input",24),e.qZA()(),e.TgZ(15,"div",18)(16,"mat-form-field",25)(17,"mat-label"),e._uU(18,"Locality"),e.qZA(),e._UZ(19,"input",26),e.qZA()(),e.TgZ(20,"div",18)(21,"mat-form-field",25)(22,"mat-label"),e._uU(23,"City"),e.qZA(),e._UZ(24,"input",27),e.qZA()()()()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.addressForm),e.xp6(7),e.Q6J("ngForOf",t.userProfile.user_addresses)}}function E(i,s){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function $(i,s){if(1&i&&(e.TgZ(0,"div")(1,"form",17)(2,"div",0)(3,"div",18)(4,"mat-form-field",25)(5,"mat-label"),e._uU(6,"Address Name"),e.qZA(),e._UZ(7,"input",29),e.qZA()(),e.TgZ(8,"div",30)(9,"mat-form-field",25)(10,"mat-label"),e._uU(11,"Address"),e.qZA(),e._UZ(12,"input",24),e.qZA()()(),e.TgZ(13,"div",0)(14,"div",18)(15,"mat-form-field",19)(16,"mat-label"),e._uU(17,"Locality"),e.qZA(),e.TgZ(18,"mat-select",31),e.YNc(19,E,2,2,"mat-option",21),e.qZA()()(),e.TgZ(20,"div",18)(21,"mat-form-field",25)(22,"mat-label"),e._uU(23,"City"),e.qZA(),e._UZ(24,"input",27),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t.addNewAddressForm),e.xp6(18),e.Q6J("ngForOf",t.localities)}}function X(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),l=e.MAs(19);return e.KtG(r.openSummaryModal(l))}),e._uU(1,"Continue"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.addressForm.invalid)}}function ee(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),l=e.MAs(19);return e.KtG(r.addNewAddress(l,r.addNewAddressForm.getRawValue()))}),e._uU(1,"Continue"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.addNewAddressForm.invalid)}}function te(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),e._uU(3,"Select Address"),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){const l=e.CHM(t).dismiss;return e.KtG(l("Cross click"))}),e.TgZ(5,"span",6),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",7),e.YNc(8,W,25,2,"div",15),e.YNc(9,$,25,2,"div",15),e.qZA(),e.TgZ(10,"div",10),e.YNc(11,X,2,1,"button",16),e.YNc(12,ee,2,1,"button",16),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(8),e.Q6J("ngIf",(null==t.userProfile||null==t.userProfile.user_addresses?null:t.userProfile.user_addresses.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.userProfile||null==t.userProfile.user_addresses?null:t.userProfile.user_addresses.length)),e.xp6(2),e.Q6J("ngIf",t.userProfile.user_addresses.length>0),e.xp6(1),e.Q6J("ngIf",0==t.userProfile.user_addresses.length)}}function oe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"h6",4),e._uU(3,"Booking Summary"),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){const l=e.CHM(t).dismiss;return e.KtG(l("Cross click"))}),e.TgZ(5,"span",6),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",7)(8,"form")(9,"h6",33),e._uU(10,"Service information"),e.qZA(),e.TgZ(11,"div",34)(12,"div",0)(13,"div",18)(14,"div",35)(15,"label",36),e._uU(16," Service Name "),e.qZA(),e.TgZ(17,"p",37),e._uU(18),e.qZA()()(),e.TgZ(19,"div",18)(20,"div",35)(21,"label",38),e._uU(22," Price "),e.qZA(),e.TgZ(23,"p",37),e._uU(24),e.qZA()()()(),e.TgZ(25,"div",0)(26,"div",39)(27,"div",35)(28,"label",40),e._uU(29," Service Date "),e.qZA(),e.TgZ(30,"p",37),e._uU(31),e.ALo(32,"date"),e.qZA()()(),e.TgZ(33,"div",39)(34,"div",35)(35,"label",41),e._uU(36," Booking Date "),e.qZA(),e.TgZ(37,"p",37),e._uU(38),e.ALo(39,"date"),e.qZA()()()()(),e._UZ(40,"hr",42),e.TgZ(41,"h6",33),e._uU(42,"Contact information"),e.qZA(),e.TgZ(43,"div",34)(44,"div",0)(45,"div",39)(46,"div",35)(47,"label",43),e._uU(48," Name "),e.qZA(),e.TgZ(49,"p",37),e._uU(50),e.qZA()()(),e.TgZ(51,"div",39)(52,"div",35)(53,"label",43),e._uU(54," Phone "),e.qZA(),e.TgZ(55,"p",37),e._uU(56),e.qZA()()()(),e.TgZ(57,"div",0)(58,"div",22)(59,"div",35)(60,"label",43),e._uU(61," Address "),e.qZA(),e.TgZ(62,"p",37),e._uU(63),e.qZA()()()(),e.TgZ(64,"div",0)(65,"div",39)(66,"div",35)(67,"label",44),e._uU(68," Locality "),e.qZA(),e.TgZ(69,"p",37),e._uU(70),e.qZA()()(),e.TgZ(71,"div",39)(72,"div",35)(73,"label",45),e._uU(74," City "),e.qZA(),e.TgZ(75,"p",37),e._uU(76),e.qZA()()()()()()(),e.TgZ(77,"div",10)(78,"button",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onBookingFormSubmit())}),e._uU(79,"Confirm Booking"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(18),e.Oqu(null==t.serviceDetail?null:t.serviceDetail.name),e.xp6(6),e.hij("\u20b9 ",null==t.serviceDetail?null:t.serviceDetail.price," Onwards**"),e.xp6(7),e.Oqu(e.xi3(32,9,t.selected,"dd/MM/yyyy")),e.xp6(7),e.Oqu(e.xi3(39,12,t.currentDate,"dd/MM/yyyy")),e.xp6(12),e.Oqu(null==t.userProfile?null:t.userProfile.user.displayName),e.xp6(6),e.Oqu(null==t.userProfile?null:t.userProfile.phone),e.xp6(7),e.Oqu(null==t.selected_address?null:t.selected_address.address),e.xp6(7),e.Oqu(null==t.selected_address?null:t.selected_address.locality),e.xp6(6),e.Oqu(null==t.selected_address?null:t.selected_address.city)}}let ie=(()=>{class i{constructor(t,o,r,l,u){this.datePipe=t,this.modalService=o,this.activeModal=r,this.formBuilder=l,this.router=u,this.currentDate=Date.now()}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.localities=A.K,t.userProfile=yield t.getUserProfile(),t.selected_address=t.userProfile.user_addresses[0]||null})()}openDateModal(t){this.activeModal.close("done"),this.modalService.open(t,{windowClass:"modal-mini",size:"md",centered:!0})}openAddressModal(t){this.activeModal.close("done"),this.userProfile?.user_addresses?.length>0?this.createAddressForm(this.userProfile.user_addresses[0]):this.createAddNewAddressForm(),this.modalService.open(t,{windowClass:"modal-mini",size:"md",centered:!0})}openSummaryModal(t){this.activeModal.close("done"),this.modalService.open(t,{windowClass:"modal-mini",size:"md",centered:!0})}close(t){this.activeModal.close(t)}getUserProfile(){return(0,m.Z)(function*(){const{data:t}=yield d.q.graphql.request(p.o0(d.q.auth.getUser().id));if(t)return[...t.user_profiles][0]})()}updateAddress(t){console.log("updateAddress :",t),this.selected_address=this.userProfile.user_addresses.filter(o=>o.address_name===t)[0],this.setAddressFormValue(this.selected_address)}createAddressForm(t){this.addressForm=this.formBuilder.group({address_id:[{value:t.id,disabled:!0},[n.kI.required]],address_name:[t.address_name,[n.kI.required,n.kI.minLength(3)]],address:[{value:t.address,disabled:!0},[n.kI.required,n.kI.minLength(3)]],locality:[{value:t.locality,disabled:!0},[n.kI.required,n.kI.minLength(3)]],city:[{value:t.city,disabled:!0},[n.kI.required,n.kI.minLength(3)]]})}createAddNewAddressForm(){this.addNewAddressForm=this.formBuilder.group({address_name:["",[n.kI.required,n.kI.minLength(3)]],address:["",[n.kI.required,n.kI.minLength(3)]],locality:["",[n.kI.required,n.kI.minLength(3)]],city:[{value:"Chennai",disabled:!0},[n.kI.minLength(3)]],is_preferred_address:[!0,[n.kI.required]]})}addNewAddress(t,o){var r=this;return(0,m.Z)(function*(){o.user_id=r.userProfile.user.id;const{data:l}=yield d.q.graphql.request(p.e$(o));l&&(r.selected_address=[...l.insert_user_addresses.returning][0],r.activeModal.close("done"),r.openSummaryModal(t))})()}setAddressFormValue(t){this.addressForm.controls.address_id.setValue(t.id),this.addressForm.controls.address_name.setValue(t.address_name),this.addressForm.controls.address.setValue(t.address),this.addressForm.controls.locality.setValue(t.locality),this.addressForm.controls.city.setValue(t.city)}onBookingFormSubmit(){var t=this;return(0,m.Z)(function*(){let o={user_id:d.q.auth.getUser().id,service_id:t.serviceDetail.sid,service_date:t.datePipe.transform(t.selected,"yyyy-MM-dd"),address_id:t.selected_address.id,address:t.selected_address.address,locality:t.selected_address.locality,city:t.selected_address.city,otp:t.generateOTP()};console.log("BookingData :",o);const{data:r}=yield d.q.graphql.request(p.IZ(o));t.modalService.dismissAll(),t.showNotification(r?"success":"error")})()}showNotification(t){"success"==t?y().fire({icon:"success",title:"Success",text:"Your service has been booked successfully!"}).then(o=>{o.isConfirmed&&this.router.navigateByUrl("user/home")}):y().fire({icon:"error",title:"Error",text:"Something went wrong! Try again."})}generateOTP(){return Math.floor(1e3+9e3*Math.random())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.uU),e.Y36(_.FF),e.Y36(_.Kz),e.Y36(n.qu),e.Y36(f.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-booking-modal"]],inputs:{serviceDetail:"serviceDetail",modalData:"modalData"},decls:20,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"modal-content","bg-secondary"],[1,"modal-header","bg-white"],["id","modal-title-default",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","px-3"],[1,"demo-inline-calendar-card"],[3,"selected","selectedChange"],[1,"modal-footer","bg-white"],[1,"text-center"],["mat-flat-button","","color","primary",3,"disabled","click"],["address",""],["summary",""],[4,"ngIf"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"disabled","click",4,"ngIf"],[1,"example-form",3,"formGroup"],[1,"col-md-6"],["appearance","outline"],["formControlName","address_name",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12"],["appearance","outline",1,"address-full-width"],["matInput","","formControlName","address"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","locality"],["matInput","","formControlName","city"],[3,"value"],["matInput","","formControlName","address_name"],[1,"col-lg-12"],["formControlName","locality"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"disabled","click"],[1,"heading-small","text-muted","mb-4"],[1,"pl-lg-4"],[1,"form-group"],["for","input-username",1,"form-control-label"],[1,"text-sm"],["for","input-email",1,"form-control-label"],[1,"col-xl-6"],["for","input-first-name",1,"form-control-label"],["for","input-last-name",1,"form-control-label"],[1,"my-2"],["for","input-address",1,"form-control-label"],["for","input-city",1,"form-control-label"],["for","input-country",1,"form-control-label"],["mat-flat-button","","color","primary","data-dismiss","modal",3,"click"]],template:function(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"Choose Service Date"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.close("Cross click")}),e.TgZ(7,"span",6),e._uU(8,"\xd7"),e.qZA()()(),e.TgZ(9,"div",7)(10,"mat-card",8)(11,"mat-calendar",9),e.NdJ("selectedChange",function(u){return o.selected=u}),e.qZA()()(),e.TgZ(12,"div",10)(13,"div",11)(14,"button",12),e.NdJ("click",function(){e.CHM(r);const u=e.MAs(17);return e.KtG(o.openAddressModal(u))}),e._uU(15,"Continue"),e.qZA()()()()()(),e.YNc(16,te,13,4,"ng-template",null,13,e.W1O),e.YNc(18,oe,80,15,"ng-template",null,14,e.W1O)}2&t&&(e.xp6(11),e.Q6J("selected",o.selected),e.xp6(3),e.Q6J("disabled",!o.selected))},dependencies:[c.sg,c.O5,n._Y,n.Fj,n.JJ,n.JL,n.F,n.sg,n.u,g.KE,g.hX,v.ey,h.lW,z.a8,G._H,Z.Nt,C.gD,c.uU],styles:[".demo-inline-calendar-card[_ngcontent-%COMP%] {\n  width: 300px;\n}\n\n.modal-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%] {\n  font-size: 1rem;\n}\n\n.modal-body[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\ntable[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%], form[_ngcontent-%COMP%], .address-full-width[_ngcontent-%COMP%] {\n  width: 100%;\n}"]}),i})();function ne(i,s){1&i&&(e.TgZ(0,"div")(1,"span",11),e._UZ(2,"i",12),e.qZA()())}const re=function(){return[]};let T=(()=>{class i{constructor(){}ngOnInit(){}getRoundOffValue(t){return Math.ceil(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-service-card-widget"]],inputs:{service:"service"},decls:15,vars:12,consts:[[1,"card","card-stats","mb-4","mb-xl-0"],[1,"card-body"],[1,"row"],[1,"col"],[3,"src","alt"],[1,"col","pt-3"],[1,"h2","font-weight-bold","mb-0",3,"title"],[1,"card-title","text-uppercase","text-muted","mb-0"],[1,"rating","pt-3"],[4,"ngFor","ngForOf"],[1,"text-nowrap","text-muted","text-sm"],[1,"text-warning","mr-1"],[1,"fa","fa-star"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"h5",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e.YNc(11,ne,3,0,"div",9),e.TgZ(12,"span",10),e._uU(13),e.ALo(14,"number"),e.qZA()()()()()()),2&t&&(e.xp6(4),e.hYB("src","assets/img/services/thumbnails/",o.service.sid,"_",o.service.sid,".jpg",e.LSH),e.s9C("alt",o.service.name),e.xp6(2),e.s9C("title",o.service.name),e.xp6(1),e.Oqu(o.service.name),e.xp6(2),e.hij("\u20b9",o.service.price," onwards"),e.xp6(2),e.Q6J("ngForOf",e.DdM(11,re).constructor(o.getRoundOffValue(o.service.ratings))),e.xp6(2),e.AsE("",e.lcZ(14,9,o.service.ratings)," (",o.service.reviews_count," Reviews)"))},dependencies:[c.sg,c.JJ],styles:[".card[_ngcontent-%COMP%] {\n  transition: all 0.15s ease-in-out;\n}\n.card[_ngcontent-%COMP%]:hover {\n  transform: scale(1.025);\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n}\n.card-body[_ngcontent-%COMP%] {\n  padding: 0.75rem 0.75rem !important;\n  cursor: pointer;\n}\n.card-body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%] {\n  flex-direction: column;\n}\n.card-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 100%;\n  border-radius: 0.375rem;\n  height: 200px;\n  object-fit: cover;\n}\n.card-body[_ngcontent-%COMP%]   span.h2[_ngcontent-%COMP%] {\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.card-body[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n}"]}),i})();function se(i,s){1&i&&(e.TgZ(0,"div")(1,"span",16),e._UZ(2,"i",17),e.qZA()())}function le(i,s){if(1&i&&(e.TgZ(0,"p",18),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.comment)}}const ae=function(){return[]};function de(i,s){if(1&i&&(e.TgZ(0,"div",7),e._UZ(1,"img",8),e.TgZ(2,"div",9)(3,"div",10)(4,"span",11),e._uU(5),e.qZA(),e._uU(6," | "),e.TgZ(7,"span",12),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"div",13),e.YNc(11,se,3,0,"div",14),e.qZA(),e.YNc(12,le,2,1,"p",15),e.qZA()()()),2&i){const t=s.$implicit,o=e.oxw();e.xp6(5),e.Oqu(t.user_profile.name),e.xp6(3),e.Oqu(e.xi3(9,4,t.date,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngForOf",e.DdM(7,ae).constructor(o.getRoundOffValue(o.service.ratings))),e.xp6(1),e.Q6J("ngIf",null==t?null:t.comment)}}let ce=(()=>{class i{constructor(){}ngOnInit(){console.log("review :",this.userReviews)}getRoundOffValue(t){return Math.ceil(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-review-widget"]],inputs:{userReviews:"userReviews"},decls:8,vars:1,consts:[[1,"card","bg-secondary","shadow","mt-4"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],["class"," media media-comment",4,"ngFor","ngForOf"],[1,"media","media-comment"],["alt","Image placeholder","src","assets/img/theme/avatar.png",1,"avatar","avatar-lg","media-comment-avatar","rounded-circle"],[1,"media-body","bg-white"],[1,"media-comment-text"],[1,"h5","mt-0"],[1,"text-muted","heading-small"],[1,"ratings"],[4,"ngFor","ngForOf"],["class"," text-sm lh-160 pt-2",4,"ngIf"],[1,"text-warning","mr-1"],[1,"fa","fa-star"],[1,"text-sm","lh-160","pt-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5,"User Reviews"),e.qZA()()()(),e.TgZ(6,"div",5),e.YNc(7,de,13,8,"div",6),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",o.userReviews))},dependencies:[c.sg,c.O5,c.uU],styles:[".media-comment[_ngcontent-%COMP%] {\n  margin-top: 2rem;\n}\n\n.media[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: flex-start;\n}\n\n.media-comment-avatar[_ngcontent-%COMP%] {\n  margin-top: -1rem;\n  margin-right: -2rem;\n  position: relative;\n  z-index: 1;\n  border: 4px solid #fff;\n  transition: all 0.15s ease;\n}\n\n.avatar-lg[_ngcontent-%COMP%] {\n  width: 58px;\n  height: 58px;\n  font-size: 0.875rem;\n}\n\n.avatar[_ngcontent-%COMP%] {\n  color: #fff;\n  background-color: #adb5bd;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1rem;\n  border-radius: 0.375rem;\n  height: 48px;\n  width: 48px;\n}\n\n.avatar.rounded-circle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .rounded-circle[_ngcontent-%COMP%] {\n  border-radius: 50% !important;\n}\n\n.media-comment-text[_ngcontent-%COMP%] {\n  border-radius: 0 0.4375rem 0.4375rem;\n  position: relative;\n  padding: 1rem 1.25rem 1rem 2.5rem;\n}\n\n.lh-160[_ngcontent-%COMP%] {\n  line-height: 1.6;\n}\n\n.text-sm[_ngcontent-%COMP%] {\n  font-size: 0.875rem !important;\n}\n\nspan.h5[_ngcontent-%COMP%] {\n  color: #525f7f;\n  font-size: 0.875rem;\n  font-weight: 600;\n}\n\n.ratings[_ngcontent-%COMP%] {\n  display: flex;\n}"]}),i})();function ue(i,s){1&i&&e._UZ(0,"hr",32)}function me(i,s){1&i&&(e.TgZ(0,"h6",33),e._uU(1,"Contact information"),e.qZA())}function pe(i,s){if(1&i&&(e.TgZ(0,"div",17)(1,"div",7)(2,"div",34)(3,"div",19)(4,"label",35),e._uU(5,"Address"),e.qZA(),e._UZ(6,"input",36),e.qZA()()(),e.TgZ(7,"div",7)(8,"div",37)(9,"div",19)(10,"label",38),e._uU(11,"City"),e.qZA(),e._UZ(12,"input",39),e.qZA()(),e.TgZ(13,"div",37)(14,"div",19)(15,"label",40),e._uU(16,"Locality"),e.qZA(),e._UZ(17,"input",41),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("value",null==t.user?null:t.user.address),e.xp6(6),e.Q6J("value",null==t.user?null:t.user.city),e.xp6(5),e.Q6J("value",null==t.user?null:t.user.locality)}}function ge(i,s){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-user-review-widget",42),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("userReviews",t.userReviews)}}let fe=(()=>{class i{constructor(t,o,r){this.route=t,this.router=o,this.modalService=r,this.serviceDetail=this.router.getCurrentNavigation().extras.state}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.route.queryParams.subscribe(function(){var o=(0,m.Z)(function*(r){if(r.prop){const{data:l}=yield d.q.graphql.request((0,p.M0)(r.prop));l&&(t.user={displayName:l.user.displayName,avatarUrl:l.user.avatarUrl,address:l.vendor_profiles[0].address,city:l.vendor_profiles[0].city,locality:l.vendor_profiles[0].locality,email:l.vendor_profiles[0].email,phoneNumber:l.vendor_profiles[0].phone,roles:"Vendor"})}else if(r.User){const{data:l}=yield d.q.graphql.request((0,p.o0)(r.User));l&&(t.user={displayName:l.user_profiles[0].user.displayName,avatarUrl:l.user_profiles[0].user.avatarUrl,address:l.user_profiles[0]?.user_addresses[0]?.address,city:l.user_profiles[0]?.user_addresses[0]?.city,locality:l.user_profiles[0]?.user_addresses[0]?.locality,email:l.user_profiles[0].user.email,phoneNumber:l.user_profiles[0].phone,roles:"User"})}else t.user=d.q.auth.getUser()});return function(r){return o.apply(this,arguments)}}()),console.log(t.serviceDetail),t.userReviews=yield t.getUserReviews(t.serviceDetail.sid),console.log(t.userReviews)})()}formatJSON(t){let o;return o.displayName=t.user.displayName,o.avatarUrl=t.user.avatarUrl,o.address=t.vendor_profiles[0].address,o.city=t.vendor_profiles[0].city,o.locality=t.vendor_profiles[0].locality,o.email=t.vendor_profiles[0].email,o.phone=t.vendor_profiles[0].phone,o}bookNow(){d.q.auth.getUser()?this.openBookingModal():this.openLoginModal()}openLoginModal(){this.modalService.open(H.X,{windowClass:"modal-mini",size:"sm",centered:!0}).result.then(o=>{console.log(`Closed with: ${o}`)})}openBookingModal(){const t=this.modalService.open(ie,{windowClass:"modal-mini",size:"md",centered:!0});t.result.then(o=>{console.log(`Closed with: ${o}`)}),t.componentInstance.serviceDetail=this.serviceDetail}getUserReviews(t){return(0,m.Z)(function*(){const{data:o}=yield d.q.graphql.request((0,p.oR)(t));return[...o.user_reviews]})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.gz),e.Y36(f.F0),e.Y36(_.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-service-details"]],decls:61,vars:11,consts:[[1,"header","pb-8","pt-5","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-lg-7","col-md-10"],[1,"display-2","text-white"],[1,"container-fluid","mt--7"],[1,"row"],[1,"col-xl-4","order-xl-2","mb-5","mb-xl-0"],[3,"service"],[1,"col-xl-8","order-xl-1","mb-8"],[1,"card","bg-secondary","shadow"],[1,"card-header","bg-white","border-0"],[1,"row","align-items-center"],[1,"col-8"],[1,"mb-0"],[1,"card-body"],[1,"pl-lg-4"],[1,"col-lg-6"],[1,"form-group"],["for","input-username",1,"form-control-label"],[1,"text-sm"],["for","input-email",1,"form-control-label"],["for","input-first-name",1,"form-control-label"],["for","input-last-name",1,"form-control-label"],[1,"col-lg-12"],["class","my-4",4,"ngIf"],["class","heading-small text-muted mb-4",4,"ngIf"],["class","pl-lg-4",4,"ngIf"],[1,"card-footer"],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[1,"my-4"],[1,"heading-small","text-muted","mb-4"],[1,"col-md-12"],["for","input-address",1,"form-control-label"],["id","input-address","type","text","disabled","",1,"form-control","form-control-alternative",3,"value"],[1,"col-lg-4"],["for","input-city",1,"form-control-label"],["type","text","id","input-city","disabled","",1,"form-control","form-control-alternative",3,"value"],["for","input-locality",1,"form-control-label"],["type","text","id","input-country","disabled","",1,"form-control","form-control-alternative",3,"value"],[3,"userReviews"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),e._uU(6),e.qZA()()()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8),e._UZ(10,"app-service-card-widget",9),e.qZA(),e.TgZ(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"h3",15),e._uU(17,"Service Details"),e.qZA()()()(),e.TgZ(18,"div",16)(19,"form")(20,"div",17)(21,"div",7)(22,"div",18)(23,"div",19)(24,"label",20),e._uU(25,"Service Name"),e.qZA(),e.TgZ(26,"p",21),e._uU(27),e.qZA()()(),e.TgZ(28,"div",18)(29,"div",19)(30,"label",22),e._uU(31,"Duration"),e.qZA(),e.TgZ(32,"p",21),e._uU(33),e.qZA()()()(),e.TgZ(34,"div",7)(35,"div",18)(36,"div",19)(37,"label",23),e._uU(38,"Price"),e.qZA(),e.TgZ(39,"p",21),e._uU(40),e.qZA()()(),e.TgZ(41,"div",18)(42,"div",19)(43,"label",24),e._uU(44,"Total Reviews"),e.qZA(),e.TgZ(45,"p",21),e._uU(46),e.qZA()()()(),e.TgZ(47,"div",7)(48,"div",25)(49,"div",19)(50,"label",23),e._uU(51,"Description"),e.qZA(),e.TgZ(52,"p",21),e._uU(53),e.qZA()()()()(),e.YNc(54,ue,1,0,"hr",26),e.YNc(55,me,2,0,"h6",27),e.YNc(56,pe,18,3,"div",28),e.qZA()(),e.TgZ(57,"div",29)(58,"button",30),e.NdJ("click",function(){return o.bookNow()}),e._uU(59,"Book Now"),e.qZA()()(),e.YNc(60,ge,2,1,"div",31),e.qZA()()()),2&t&&(e.xp6(6),e.Oqu(null==o.serviceDetail?null:o.serviceDetail.name),e.xp6(4),e.Q6J("service",o.serviceDetail),e.xp6(17),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.name," "),e.xp6(6),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.duration," hours "),e.xp6(7),e.hij(" \u20b9 ",null==o.serviceDetail?null:o.serviceDetail.price," Onwards** "),e.xp6(6),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.reviews_count," "),e.xp6(7),e.hij(" ",null==o.serviceDetail?null:o.serviceDetail.description," "),e.xp6(1),e.Q6J("ngIf",null==o.user?null:o.user.address),e.xp6(1),e.Q6J("ngIf",null==o.user?null:o.user.address),e.xp6(1),e.Q6J("ngIf",null==o.user?null:o.user.address),e.xp6(4),e.Q6J("ngIf",(null==o.userReviews?null:o.userReviews.length)>0))},dependencies:[c.O5,T,ce,n._Y,n.JL,n.F,h.lW],styles:[".card-profile-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n  width: 180px;\n}\n\n.mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 300px;\n}"]}),i})();var _e=a(8675),ve=a(4004),he=a(7392);function Ze(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-option",29),e.NdJ("click",function(){const l=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.getServiceDetails(l))}),e._uU(1),e.qZA()}if(2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ye(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",30),e.NdJ("click",function(){const l=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.getServiceDetails(l))}),e._UZ(1,"app-service-card-widget",31),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(1),e.Q6J("service",t)}}const be=[{path:"home",component:(()=>{class i{constructor(t,o){this.router=t,this.sharedService=o,this.myControl=new n.NI(""),this.options=[]}ngOnInit(){var t=this;this.sharedService.userData.subscribe(function(){var o=(0,m.Z)(function*(r){if(r){if(0==(yield t.isProfileCompleted(r.id)).length)return void t.router.navigateByUrl(`user/profile?id=${d.q.auth.getUser().id}`);t.getServices()}else t.getServices()});return function(r){return o.apply(this,arguments)}}())}getServices(){var t=this;return(0,m.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.ew);o&&(t.servicesList=[...o.service_details],t.options=t.servicesList,t.filteredOptions=t.myControl.valueChanges.pipe((0,_e.O)(""),(0,ve.U)(l=>l.length>=2?t._filter(l||""):[])))})()}getServiceDetails(t){this.router.navigate([`user/service-details/${t.sid}`],{state:t})}_filter(t){return this.options.filter(o=>o.name.toLowerCase().includes(t.toLowerCase()))}isProfileCompleted(t){return(0,m.Z)(function*(){const{data:o}=yield d.q.graphql.request(p.XL(t));return[...o.user_profiles]})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.F0),e.Y36(U.F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-home"]],decls:45,vars:6,consts:[[1,"user-home-wrapper"],[1,"header","pb-8","pt-8","pt-lg-8","d-flex","align-items-center",2,"background-size","cover","background-position","center top"],[1,"mask","bg-gradient-danger","opacity-8"],[1,"container-fluid","d-flex","align-items-center"],[1,"row",2,"width","100%"],[1,"col-12","text-center"],[1,"display-2","text-white"],[1,"text-white"],[1,"header","pb-8"],[1,"container-fluid"],[1,"mt--7"],[1,"card","shadow"],[1,"card-header","bg-transparent"],[1,"row","align-items-center"],[1,"col"],[1,"text-uppercase","text-muted","ls-1","mb-1"],[1,"mb-0"],[1,"card-body"],[1,"navbar-search","navbar-search-light","form-inline","mr-3","d-md-flex","ml-lg-auto"],["appearance","outline",1,"example-full-width"],["matPrefix",""],["type","text","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],[1,"header-body","pt-5"],[1,"card","shadow","bg-secondary"],[1,"card-header","bg-white"],[1,"row"],["class","col-xl-3 col-lg-4 col-md-4 pb-4",3,"click",4,"ngFor","ngForOf"],[3,"value","click"],[1,"col-xl-3","col-lg-4","col-md-4","pb-4",3,"click"],[3,"service"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"span",2),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),e._uU(7,"Purity Smart Services"),e.qZA(),e.TgZ(8,"h3",7),e._uU(9,"Professional Home Services \u2013 your one-stop solution for all your home maintenance and repair needs!"),e.qZA()()()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"h6",15),e._uU(18,"Search any service"),e.qZA(),e.TgZ(19,"h2",16),e._uU(20,"What service do you need?"),e.qZA()()()(),e.TgZ(21,"div",17)(22,"form",18)(23,"mat-form-field",19)(24,"mat-label"),e._uU(25,"Search"),e.qZA(),e.TgZ(26,"mat-icon",20),e._uU(27,"search"),e.qZA(),e._UZ(28,"input",21),e.TgZ(29,"mat-autocomplete",null,22),e.YNc(31,Ze,2,2,"mat-option",23),e.ALo(32,"async"),e.qZA()()()()()(),e.TgZ(33,"div",24)(34,"div",25)(35,"div",26)(36,"div",13)(37,"div",14)(38,"h6",15),e._uU(39,"Choose your service"),e.qZA(),e.TgZ(40,"h2",16),e._uU(41,"All Services"),e.qZA()()()(),e.TgZ(42,"div",17)(43,"div",27),e.YNc(44,ye,2,1,"div",28),e.qZA()()()()()()()),2&t){const r=e.MAs(30);e.xp6(28),e.Q6J("formControl",o.myControl)("matAutocomplete",r),e.xp6(3),e.Q6J("ngForOf",e.lcZ(32,4,o.filteredOptions)),e.xp6(13),e.Q6J("ngForOf",o.servicesList)}},dependencies:[c.sg,T,n._Y,n.Fj,n.JJ,n.JL,n.F,n.oH,g.KE,g.hX,g.qo,b.XC,b.ZL,v.ey,he.Hw,Z.Nt,c.Ov],styles:[".mask[_ngcontent-%COMP%] {\n  position: fixed;\n  height: 400px;\n}\n\n.display-2[_ngcontent-%COMP%] {\n  font-size: 2rem;\n  font-family: sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n}\n\n.navbar-search-light[_ngcontent-%COMP%]   .focused[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%] {\n  border-color: #f5365c !important;\n}\n\nmat-form-field[_ngcontent-%COMP%] {\n  width: 100%;\n}"]}),i})()},{path:"profile",component:V},{path:"my-bookings",component:J},{path:"service-details/:id",component:fe},{path:"logout",component:F.t},{path:"**",redirectTo:"home"}];var Ae=a(843),Ce=a(9258);let qe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[c.uU],imports:[c.ez,Ce.K,n.u5,n.UX,x.JF,O.g,_.IJ,k.JX,N.Iq,P.p0,w.Is,g.lN,b.Bb,n.UX,Ae.p,M.TU,f.Bz.forChild(be),g.lN]}),i})()}}]);